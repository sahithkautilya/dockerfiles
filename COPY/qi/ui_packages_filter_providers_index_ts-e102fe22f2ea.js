"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_filter_providers_index_ts"],{18991:(e,t,i)=>{i.d(t,{D:()=>l});var r=i(491);let l={filterInvalid:e=>`Filter contains ${e} issue${1===e?"":"s"}:`,filterBlockInvalid:e=>`${e} is invalid`,filterProviderNotSupported:e=>`Filter '${e}' not supported`,filterProviderDeprecated:e=>`Filter '${e}' is deprecated and will be removed in the future`,filterValueEmpty:e=>`Empty value for <pre>${e}</pre>`,filterMultiValueFalse:e=>`Only one value allowed for <pre>${e}</pre>`,filterInvalidValue:(e,t)=>`Invalid value <pre>${t}</pre> for <pre>${e}</pre>`,filterProviderTopLevel:e=>`Filter <pre>${e}</pre> cannot be used within groups`,unbalancedQuotations:"Unbalanced quotation marks",unbalancedParentheses:"Unbalanced parentheses",maxNestedGroups:`Maximum nested groups of ${r.mn} exceeded`,advancedFilterDialogCloseConfirmation:{title:"Discard changes?",content:"You have unsaved changes. Are you sure you want to discard them?",cancelButtonContent:"Keep editing",confirmButtonContent:"Close and discard"},exclude:"Exclude",dividerValue:"%%DIVIDER%%"}},82759:(e,t,i)=>{i.d(t,{Ge:()=>l.Ge,Pt:()=>s.Pt,U2:()=>a.U2,g0:()=>r.g0});var r=i(92641),l=i(75797),a=i(16099),s=i(55581)},44308:(e,t,i)=>{i.d(t,{N:()=>FilterQuery});var r=i(79607),l=i(91385),a=i(52123),s=i(491),o=i(18991),n=i(90678),u=i(71073);function d(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function p(e,t){var i=c(e,t,"get");return i.get?i.get.call(e):i.value}function v(e,t,i){d(e,t),t.set(e,i)}function h(e,t,i){var r=c(e,t,"set");if(r.set)r.set.call(e,i);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=i}return i}function m(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}function f(e,t){d(e,t),t.add(e)}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var g=new WeakMap,x=new WeakMap,_=new WeakMap,b=new WeakMap,w=new WeakMap,B=new WeakMap,k=new WeakMap,F=new WeakSet,N=new WeakSet;let FilterQuery=class FilterQuery{get activeBlock(){return p(this,g)}get activeBlockId(){return p(this,g)?.id??-1}get blocks(){return p(this,x)}clearActiveBlock(){h(this,g,void 0)}get context(){let e={...p(this,_)??{},...p(this,b)??{}};if(!p(this,_)?.repo){let t=p(this,x).filter(e=>(0,u.aK)(e)&&"repo"===e.provider.key).map(e=>e.value.values.map(e=>!1!==e.valid?(0,u.M5)(e.value)??"":"")).flat();if(t.length>0&&(e.repo=t.join(",")),!p(this,_)?.org){let t=p(this,x).filter(e=>(0,u.aK)(e)&&"org"===e.provider.key).map(e=>e.value.values.map(e=>!1!==e.valid?(0,u.M5)(e.value)??"":"")).flat();t.length>0&&(e.org=t.join(","))}}return e}get contextURLParams(){return new URLSearchParams(this.context)}get errors(){return p(this,w)?Array.from(p(this,w)):[]}getErrors(e=!1){return e?[...p(this,w),...p(this,B)]:p(this,w)}get filterCount(){if(!this.isValidated||!(0,u.Ed)(this))return this.cachedFilterCount;let e=this.blocks.filter(e=>(0,u.aK)(e)&&e.value.values.some(e=>e.valid)).length;return this.cachedFilterCount=e,e}get filtersUsed(){if(!(0,u.Ed)(this))return this.cachedFiltersUsed;let e=(0,u.wR)(this.blocks).filter(e=>(0,u.aK)(e)).map(e=>e.provider?.key);return this.cachedFiltersUsed=e,e}get instanceContext(){return{cachedFilterCount:this.cachedFilterCount,cachedFiltersUsed:this.cachedFiltersUsed,cachedNestedGroupCount:this.cachedNestedGroupCount,staticContext:p(this,_)}}get nestedGroupCount(){if(!(0,u.Ed)(this))return this.cachedNestedGroupCount;let e=(0,u.wR)(this.blocks).filter(e=>(0,u.W9)(e)).reduce((e,t)=>Math.max(e,t.groupDepth||0),0);return this.cachedNestedGroupCount=e,e}get raw(){return p(this,k)}get staticContext(){return p(this,_)}set staticContext(e){h(this,_,e)}set additionalParams(e){h(this,b,e)}addQueryParam(e,t){p(this,b)||h(this,b,{}),p(this,b)[e]=t}async getSuggestions(e,t,i){let a=this.activeBlock,d=[];if(!a&&""===this.raw||a?.type===n._B.Space||a?.type===n._B.UnmatchedOpenParen||a?.type===n._B.Group&&(a?.raw.endsWith("(")||a?.raw==="()")){d=[{id:"providers-suggestion-group",suggestions:Object.values(t).filter(e=>m(this,F,S).call(this,e)&&e.options.support.status===n.b9.Supported).filter(e=>e.priority<=s.$D).sort((e,t)=>e.priority-t.priority).map(e=>({type:n.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority,icon:e.icon,value:e.key}))}];let e=[];i.groupAndKeywordSupport&&(e.push((0,u.PU)()),e.push((0,u.j1)())),Object.values(t).filter(e=>!0===e.options.filterTypes.exclusive&&m(this,F,S).call(this,e)).length>0&&e.push((0,u.m1)()),d.push({id:"utility-suggestion-group",suggestions:e})}else if(a?.type===n._B.Text&&"-"===a.raw){let e=Object.values(t).filter(e=>e.options.filterTypes.exclusive&&m(this,F,S).call(this,e)&&e.options.support.status===n.b9.Supported).filter(e=>e.priority<=s.$D).sort((e,t)=>e.priority-t.priority).map(e=>({type:n.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority,icon:e.icon,value:`-${e.key}`}));d=[{id:"exclude-providers",title:o.D.exclude,suggestions:e}]}else if(a?.type===n._B.Text){let l=[],s=(0,u.ON)(a)?a:null,o=s&&e-s.startIndex<=s.raw.indexOf(i.filterDelimiter)?s.raw.substring(0,e-s.startIndex):a.raw;Object.values(t).map(e=>{if(((0,u.kZ)(e,o,!0)||e.displayName&&e.displayName.startsWith(o))&&m(this,F,S).call(this,e)&&e.options.support.status===n.b9.Supported){let t=e.key;t===o&&t.endsWith(".")||(a.raw.startsWith("-")&&e.options.filterTypes.exclusive&&(t=`-${e.key}`),l.push({type:n.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority-(0,r.dt)(o,e.key),icon:e.icon,value:t}))}}),l.sort((e,t)=>e.priority-t.priority),d=[{id:"providers-suggestion-group",suggestions:l}];let c=[];i.groupAndKeywordSupport&&("and".startsWith(o.toLocaleLowerCase())&&c.push((0,u.PU)()),"or".startsWith(o.toLocaleLowerCase())&&c.push((0,u.j1)())),d.push({id:"utility-suggestion-group",suggestions:c})}else if((0,u.aK)(a)){let s=[],o=(0,u.Xz)(a.key.value);if((0,u.v7)(a)){let[c,p]=(0,u.t4)(a,e);if("key"===c){let e=[];Object.values(t).map(t=>{((0,l.qA)(p.value,t.key)||t.options.filterTypes.exclusive&&(0,l.qA)(p.value,`-${t.key}`))&&m(this,F,S).call(this,t)&&e.push({type:n.ak.Key,displayName:t.displayName,ariaLabel:`${t.displayName}, Filter${t.description?`, ${t.description}`:""}`,priority:t.priority-(0,r.dt)(p.value,t.key),icon:t.icon,value:t.key})}),e.sort((e,t)=>e.priority-t.priority),d=[{id:"providers-suggestion-group",suggestions:e}]}else if("value"===c){let r=Object.values(t).find(e=>(0,u.kZ)(e,o)),l=await r?.getSuggestions(this,a,i,e);s=l?.filter(e=>0>a.value.values.findIndex(t=>(0,u.M5)(t.value)===e.value&&!t.hasCaret)).sort((e,t)=>e.priority-t.priority)??[]}}d=[{id:"values-suggestion-group",suggestions:s}]}return d}constructor(e="",t=[],i,r,l,s=!1){f(this,F),f(this,N),y(this,"cachedFilterCount",0),y(this,"cachedFiltersUsed",[]),y(this,"cachedNestedGroupCount",0),y(this,"config",void 0),y(this,"isValidated",!1),v(this,g,{writable:!0,value:void 0}),v(this,x,{writable:!0,value:void 0}),v(this,_,{writable:!0,value:{}}),v(this,b,{writable:!0,value:{}}),v(this,w,{writable:!0,value:[]}),v(this,B,{writable:!0,value:[]}),v(this,k,{writable:!0,value:void 0}),h(this,x,t),h(this,k,e),h(this,g,r),this.isValidated=s,l&&(h(this,_,l.staticContext),this.cachedFilterCount=l.cachedFilterCount??0,this.cachedFiltersUsed=l.cachedFiltersUsed??[],this.cachedNestedGroupCount=l.cachedNestedGroupCount??0),this.config=i??a.a7,m(this,N,C).call(this,t)}};function S(e){return e.options.filterTypes?.multiKey!==!1||this.blocks.filter(t=>(0,u.aK)(t)&&t.key.value===e.key).length<1}function C(e){let t=new Set,i=new Set,r=e=>{for(let l of e)if((0,u.W9)(l)){if(!l.valid)for(let e of l.validations??[])e.message&&t.add(e.message);r(l.blocks)}else if((0,u.aK)(l)&&!1===l.valid&&this.activeBlockId!==l.id){if(l.validationMessage&&t.add(l.validationMessage??""),!l.key.valid)for(let e of l.key.validations??[])e.message&&t.add(e.message);for(let e of l.value.values)if(!1===e.valid)if(e.validations)for(let i of e.validations??[])i.message&&t.add(i.message);else t.add(o.D.filterInvalidValue(l.key.value,(0,u.q5)((0,u.I8)(e.value))??""))}else if(((0,u.oE)(l)||(0,u.iy)(l))&&l.validations)i.add(o.D.unbalancedParentheses);else if((0,u.ON)(l))for(let e of l.validations??[])e.message&&i.add(e.message)};(p(this,k).match(/"/g)??[]).length%2!=0&&i.add(o.D.unbalancedQuotations),r(e),h(this,w,Array.from(t)),h(this,B,Array.from(i))}},96276:(e,t,i)=>{i.d(t,{i:()=>FilterQueryParser});var r=i(46632),l=i(52123),a=i(491),s=i(18991),o=i(44308),n=i(90678),u=i(71073);let d=(0,r.A)((e,t)=>RegExp(`([\\s${e}"]*?)((?:>|<|>=|<=)*[\\w\\d\\-_"'?/\\.=+!@#$%^&*`+(t?");:\\p{Extended_Pictographic}]*)$":"();:\\p{Extended_Pictographic}]*)$"),"gu"));function c(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function p(e,t){var i=c(e,t,"get");return i.get?i.get.call(e):i.value}function v(e,t,i){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,i)}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let m=(0,r.A)((e,t)=>RegExp(`[\\s${e}${t?")":""}](?=(?:[^"]*"[^"]*")*[^"]*$)`,"g")),f=(0,r.A)(e=>RegExp(`${e}(?=(?:[^"]*"[^"]*")*[^"]*$)`,"g"));var y=new WeakMap,g=new WeakMap;let FilterQueryParser=class FilterQueryParser{parse(e,t=new o.N("",[],this.config),i=-1){let r,l=function(e,t,i=-1){let{matchedParens:r,unmatchedOpenParens:l,unmatchedCloseParens:o}=function(e){let t=[],i=[],r=!1,l=new Set,a=new Set;for(let l=0;l<e.length;l++)'"'===e[l]&&(r=!r),"("!==e[l]||r?")"===e[l]&&!r&&t.length>0?i.push([t.pop(),l]):")"!==e[l]||r||a.add(l):t.push(l);let s=new Map;for(let[e,t]of i)s.set(e,t);for(let e of t)l.add(e);return{matchedParens:s,unmatchedOpenParens:l,unmatchedCloseParens:a}}(e),d=0,c=0,p=0;return function v(h=e.length){let m=[],f=e.substring(0,h);for(;d<h;)if(t&&void 0!==r.get(d)){let t=d,l=r.get(d);d+=1;let o=(p+=1)>a.mn;m.push({id:c,type:n._B.Group,raw:e.substring(t,l+1),blocks:v(l),groupDepth:p,startIndex:t,endIndex:l,hasCaret:(0,u.dV)(i,t,l),valid:!o,validations:o?[{type:n.b.MaxNestedGroups,message:s.D.maxNestedGroups}]:[]}),p-=1,d=l+1}else if(t&&"("===f[d])m.push({id:c,type:n._B.UnmatchedOpenParen,raw:"(",startIndex:d,endIndex:d+1,hasCaret:(0,u.dV)(i,d+1,d+1),valid:!1,validations:[{type:n.b.UnbalancedParentheses,message:s.D.unbalancedParentheses}]}),c+=1,d+=1;else if(t&&")"===f[d])m.push({id:c,type:n._B.UnmatchedCloseParen,raw:")",startIndex:d,endIndex:d+1,hasCaret:(0,u.dV)(i,d+1,d+1),valid:!1,validations:[{type:n.b.UnbalancedParentheses,message:s.D.unbalancedParentheses}]}),c+=1,d+=1;else if(f[d]?.search(/\s/)===0){let e=f[d]??"";for(let t=d+1;t<h;t++)if(f[t]?.search(/\s/)===0)e+=f[t]??"";else break;m.push({id:c,type:n._B.Space,raw:e,startIndex:d,endIndex:d+e?.length,hasCaret:(0,u.dV)(i,d+1,d+e?.length)}),c+=1,d+=e?.length}else{let e,r=function(e,t,i){let r=0,l=null;do{let a=l?l+1:t,s=i?e.slice(a).search(/\s|\(|\)/):e.slice(a).search(/\s/);l=-1===s?-1:a+s,r=0;for(let t=0;t<l;t++)'"'===e[t]&&(r+=1)}while(r%2==1)return l}(f,d,t);r>-1&&(e=r>-1&&f[r]?.match(/\s/)?r+1:r);let a=f.substring(d,e).trimEnd();m.push({id:c,type:n._B.Text,raw:a,startIndex:d,endIndex:d+a.length,hasCaret:(0,u.dV)(i,d,d+a.length),valid:0===l.size&&0===o.size,validations:[]}),c+=1,d+=a.length}return m}()}(e,this.config.groupAndKeywordSupport??!1,i),d=e=>{for(let[t,l]of e.entries())if(l.type!==n._B.Space&&l.type!==n._B.UnmatchedOpenParen&&l.type!==n._B.UnmatchedCloseParen)if(this.config.groupAndKeywordSupport&&(0,u.W9)(l))l.blocks=d(l.blocks),!l.blocks.length&&l.hasCaret&&(r=l);else{let s=l;if(this.config.groupAndKeywordSupport&&a.d6.includes(s.raw))s.type=n._B.Keyword;else{let r=s.raw,l=r.indexOf(this.config.filterDelimiter),a=r.substring(0,l),o=this.filterProviders.find(e=>(0,u.kZ)(e,a));o&&(s=this.processFilterBlock(s,o,l,i),e[t]=s)}s.hasCaret&&(r=s)}else l.type===n._B.Space&&l.hasCaret||l.type===n._B.UnmatchedOpenParen&&l.hasCaret?r=l:l.type===n._B.UnmatchedCloseParen&&l.hasCaret&&(r=l);return e};return l=d(l),new o.N(e,l,this.config,r,t.instanceContext)}replaceActiveBlockWithPresenceBlock(e,t){let i,r=0,l=e.activeBlock;if(!(l&&(0,u.v7)(l)))return[e.raw,e.raw.length];{let a=e.raw.substring(0,l.startIndex),s=e.raw.substring(l.endIndex);return r=(i=`${a}${t}${this.config.filterDelimiter}${l.key.value}`).length,[i+=s&&s[0]?.search(/\s/)!==0?` ${s}`:s,r]}}insertSuggestion(e,t,i){let r,l=0,a=e.activeBlock;if(a&&(0,u.v7)(a)){let s=e.raw.substring(0,a.startIndex),o=e.raw.substring(a.endIndex),n=[],d=a.key.value;if(t.startsWith("-"))d=t,l=(r=`${s}${d}${this.config.filterDelimiter}`).length;else{for(let e of a.value.values)(0,u.dV)(i,e.startIndex,e.endIndex)?(l=e.startIndex+t.length,n.push(t)):n.push((0,u.I8)(e.value)??"");r=`${s}${d}${this.config.filterDelimiter}${n.join(this.config.valueDelimiter)}`}r+=o}else if(a&&(0,u.ON)(a)&&i-a.startIndex<=a.raw.indexOf(this.config.filterDelimiter)){let i=e.raw.substring(0,a.startIndex),s=e.raw.substring(a.endIndex),o=a.raw.indexOf(this.config.filterDelimiter),n=a.raw.substring(o+1);r=`${i}${t}${n}${s}`,l=i.length+t.length}else if(i>=0){let a=e.raw.substring(0,i),s=e.raw.substring(i);this.NEXT_DELIMITER_REGEX.lastIndex=0;let o=this.NEXT_DELIMITER_REGEX.exec(s);s=o?s.substring(o.index):"",r=(a=a.replace(this.LAST_DELIMITER_REGEX,"$1")+t)+s,l=a.length}else l=(r=e.raw+t).length;return[r,l]}getRaw(e){let t="";for(let i of e.blocks)(0,u.aK)(i)?(t+=i.key.value,t+=i.value.raw?`${e.config.filterDelimiter}${i.value.raw}`:""):t+=i.raw;return t}validateFilterProvider(e,t=!1){return e.options.support.status===n.b9.Unsupported?[!1,{type:n.b.FilterProviderUnsupported,message:e.options.support.message??s.D.filterProviderNotSupported(e.key)}]:e.options.support.status===n.b9.Deprecated?[!1,{type:n.b.FilterProviderDeprecated,message:e.options.support.message??s.D.filterProviderDeprecated(e.key)}]:!t&&a.jb.includes(e.key)?[!1,{type:n.b.FilterProviderTopLevel,message:s.D.filterProviderTopLevel(e.key)}]:[!0,void 0]}processFilterBlock(e,t,i,r){let l=e.startIndex,a=e.raw.substring(0,i),s=e.raw.substring(i+1),o=(0,u.zB)(t,a,s)??n.tl.Is,d=l+i+1,c=s.split(this.ITEMS_REGEX);if(o===n.tl.Between){let e=[];c.map(t=>{let i=t.split("..").filter(e=>e);i.length<2&&(t.startsWith("..")?i=["",...i]:i.push("")),e=[...e,...i]}),c=e}let v=c.map(e=>{let i={startIndex:d,endIndex:d+e.length,hasCaret:(0,u.dV)(r,d,d+e.length),value:e,valid:!!p(this,g).has(`${a}${this.config.filterDelimiter}${(0,u.I8)(e)}`)||void 0};t.filterValues&&void 0===i.valid&&t.filterValues?.find(t=>!!((0,u.I8)(t.value)===e||t.aliases?.includes(e))&&(i.valid=!0,!0));let l=o===n.tl.Between?2:1;return d=d+e.length+l,i});return{...e,type:n._B.Filter,provider:t,operator:o,valid:!!p(this,g).has(e.raw)||void 0,key:{startIndex:l,endIndex:l+i,hasCaret:(0,u.dV)(r,l,l+i),value:a},value:{startIndex:l+i+1,endIndex:l+e.raw.length,hasCaret:(0,u.dV)(r,l+i+1,l+e.raw.length),values:v,raw:s}}}async validateQueryBlock(e,t,i=!1){if((0,u.v7)(e)){let[r,l]=this.validateFilterProvider(e.provider,i),a=await e.provider.validateFilterBlockValues?.(t,e,e.value.values,this.config);a.map(t=>{t.valid&&p(this,g).add(`${e.provider.key}${this.config.filterDelimiter}${(0,u.I8)(t.value)}`)});let s=a.every(e=>e.valid)&&r;return s&&p(this,g).add(e.raw),{...e,valid:s,key:{...e.key,valid:r,validations:l?[l]:void 0},value:{...e.value,values:a}}}return e}async validateGroupBlock(e,t){let i=await Promise.all(e.blocks.map(e=>(0,u.W9)(e)?this.validateGroupBlock(e,t):this.validateQueryBlock(e,t)));return{...e,blocks:i}}async validateFilterQuery(e){let t=[];e.blocks.map(i=>{(0,u.W9)(i)?t.push(this.validateGroupBlock(i,e)):(0,u.h8)(i)&&t.push(this.validateQueryBlock(i,e,!0))});let i=await Promise.all(t);return!p(this,y)[e.raw]&&(0,u.Ed)(e)&&(p(this,y)[e.raw]=e),new o.N(e.raw,i,this.config,e.activeBlock,e.instanceContext,!0)}constructor(e=[],t){h(this,"filterProviders",[]),h(this,"config",void 0),v(this,y,{writable:!0,value:{}}),v(this,g,{writable:!0,value:void 0}),h(this,"NEXT_DELIMITER_REGEX",void 0),h(this,"ITEMS_REGEX",void 0),h(this,"LAST_DELIMITER_REGEX",void 0),this.filterProviders=e,this.config=t??l.a7,function(e,t,i){var r=c(e,t,"set");if(r.set)r.set.call(e,i);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=i}}(this,g,new Set),this.NEXT_DELIMITER_REGEX=m(this.config.valueDelimiter,this.config.groupAndKeywordSupport??!1),this.ITEMS_REGEX=f(this.config.valueDelimiter),this.LAST_DELIMITER_REGEX=d(this.config.valueDelimiter,this.config.groupAndKeywordSupport??!1)}}},72082:(e,t,i)=>{i.d(t,{M:()=>HasFilterProvider});var r=i(90678),l=i(14653);let HasFilterProvider=class HasFilterProvider extends l.Q{constructor(e,t){super(e,r.ak.HasValue,t)}}},50348:(e,t,i)=>{i.d(t,{RY:()=>J,AR:()=>ArchivedFilterProvider,n5:()=>AssigneeFilterProvider,kr:()=>AsyncFilterProvider,Bc:()=>AuthorFilterProvider,dR:()=>BaseFilterProvider,ac:()=>BaseIssueFilterProvider,Qh:()=>BaseUserFilterProvider,rL:()=>BlockedBySearchFilterProvider,tQ:()=>BlockingSearchFilterProvider,Wq:()=>BooleanFilterProvider,ws:()=>ClosedFilterProvider,_N:()=>CommenterFilterProvider,Ge:()=>CommentsFilterProvider,_O:()=>CreatedFilterProvider,FZ:()=>DraftFilterProvider,Ws:()=>HeadFilterProvider,jd:()=>InBodyFilterProvider,z_:()=>InCommentsFilterProvider,HD:()=>InFilterProvider,$W:()=>InTitleFilterProvider,NT:()=>InteractionsFilterProvider,IL:()=>InvolvesFilterProvider,I4:()=>IsFilterProvider,aF:()=>LabelFilterProvider,a2:()=>LanguageFilterProvider,d$:()=>LinkedFilterProvider,Pd:()=>MentionsFilterProvider,Or:()=>MergedFilterProvider,Qq:()=>MilestoneFilterProvider,tW:()=>NestedFilterProvider,E:()=>OrgFilterProvider,$q:()=>ParentIssueFilterProvider,FG:()=>ProjectFilterProvider,WE:()=>ReactionsFilterProvider,Ag:()=>ReasonFilterProvider,pH:()=>RepositoryFilterProvider,A6:()=>ReviewFilterProvider,kL:()=>ReviewRequestedFilterProvider,sW:()=>ReviewedByFilterProvider,KX:()=>ShaFilterProvider,uB:()=>SortFilterProvider,PT:()=>StateFilterProvider,uy:()=>StaticFilterProvider,C2:()=>StatusFilterProvider,NN:()=>TeamFilterProvider,X_:()=>TeamReviewRequestedFilterProvider,pv:()=>UpdatedFilterProvider,Dv:()=>UserFilterProvider,LB:()=>UserReviewRequestedFilterProvider});var r=i(61407),l=i(491),a=i(18991),s=i(55581),o=i(90678),n=i(71073),u=i(62884);function d(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p=new WeakMap;let v=class ValidationAbortController extends AbortController{abortIfChanged(e){var t;(void 0===e||e!==(t=d(this,p,"get"),t.get?t.get.call(this):t.value))&&this.abort()}constructor(e){super(),function(e,t,i){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,i)}(this,p,{writable:!0,value:void 0}),function(e,t,i){var r=d(e,t,"set");if(r.set)r.set.call(e,i);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=i}}(this,p,e)}};let AsyncFilterProvider=class AsyncFilterProvider extends u.A{abortPreviousSuggestionsRequests(){this.abortSuggestionsController.abort(),this.abortSuggestionsController=new AbortController}abortPreviousValidationRequests(e){this.abortValidationController.abortIfChanged(e?.raw),this.abortValidationController=new v(e?.raw)}getFilterValue(e,t){return t||((0,n.I8)((0,n.sF)(e)?(0,n.I8)(e.value?.values.at(-1)?.value):e.raw)??"")}getMetaSuggestions(e){return[]}async processSuggestions(e,t,i,r){if(!this.shouldGetSuggestions(t))return null;let l=(0,n.DS)(t,r);this.abortPreviousSuggestionsRequests();let a=this.abortSuggestionsController,s=await this.fetchSuggestions(l,t,e)??[],o=t.provider.key,u=[],d=(0,n.jL)(this.displayName,this.icon),c=(0,n.Ms)(this.displayName,this.icon),p=(0,n.m1)(o);(0,n.uT)(t)&&this.options.filterTypes.valueless&&!t.raw.startsWith("-")&&u.push(d),(0,n.uT)(t)&&this.options.filterTypes.hasValue&&!t.raw.startsWith("-")&&u.push(c),this.options.filterTypes.exclusive&&""===l&&(0,n.aK)(t)&&t.raw!==`-${o}:`&&u.unshift(p);let v=[...u,...[...s].map(t=>i(t,l,e))];for(let e of v)[d,c,p].includes(e)||this.prefetchedSuggestions.set(e.value,e);return a.signal.aborted?null:v}async validateFilterBlockValues(e,t,i){let r={},s=i.map(async(s,u)=>{let d=(0,n.M5)(s.value),c=i.findIndex(e=>(0,n.M5)(e.value)===d);if(!d||c<u&&c>=0){r[u]={...s,valid:!1,validations:[{type:o.b.EmptyValue,message:a.D.filterValueEmpty(this.key)}]};return}let p=this.prefetchedSuggestions.get(d),v=this.getMetaSuggestions(d)?.[0];if(p){r[u]={...s,...p,valid:!0,value:s.value};return}if(v?.value===d){r[u]={...s,...v,valid:!0,value:s.value};return}if(e.activeBlockId!==t.id){let t=this.getFilterValue({id:1,type:o._B.Filter,raw:`${this.key}:`,value:{raw:d,values:[{value:d}]}},d),i=await this.validateFilterValue(t,e.contextURLParams,e);if(i instanceof Error)"Aborted"===i.message?r[u]={...s,valid:void 0,value:s.value}:r[u]={...s,valid:!1};else{let t=this.validateValue?.(e,s,i);return t?t.value===l.rt?r[u]={...s,valid:!0,value:s.value}:r[u]={...s,valid:!0,...t,value:s.value}:r[u]={...s,valid:!1,validations:[{type:o.b.InvalidValue,message:a.D.filterInvalidValue(this.key,d)}]},s}}r[u]={...s,valid:void 0}});return await Promise.all(s),Object.values(r)}async fetchSuggestions(e,t,i){try{if(this.suggestionCache.has(e))return this.suggestionCache.get(e)??[];if(!this.suggestionEndpoint||""===this.suggestionEndpoint)throw Error("No suggestion endpoint provided");let t=new URL(this.suggestionEndpoint,window.location.origin),r=i.contextURLParams,l=new URLSearchParams([r?.toString(),this.providerContext?.toString()].join("&"));l.set("q",e),l.set("filter_value",e),t.search=l.toString();let a=await this.fetchData(t.toString());if(!a||!a.ok)return null;let o=await a.json(),n=Object.keys(o)[0],u=n?o[n]:null;if(Array.isArray(u)&&u.length<s.Rx&&this.completeResultSetQueries.add(e),!u)return null;return this.suggestionCache.set(e,u),u}catch{return null}}isCompleteResultSetQuery(e){return!!e&&-1!==Array.from(this.completeResultSetQueries).findIndex(t=>""===t?t===e:e.startsWith(t))}findPrefetchedSuggestions(e){if(!e)return[];let t=(0,r.t)({items:[...this.prefetchedSuggestions.values()],filter:e,key:e=>(0,n.I8)(e.value)??"",secondaryKey:e=>e.displayName??e.description??""}).slice(0,s.Rx);return t.push(...this.getMetaSuggestions(e)),t}async validateFilterValue(e,t,i){try{let r;if(this.validationCache.has(e))return this.validationCache.get(e)??null;if(!this.validationEndpoint||""===this.validationEndpoint)throw Error("No validation endpoint provided");let l=new URL(this.validationEndpoint,window.location.origin),a=new URLSearchParams([t?.toString(),this.providerContext?.toString()].join("&"));a.set("q",e),a.set("filter_value",e),l.search=a.toString(),this.abortPreviousValidationRequests(i);let s=await this.fetchData(l.toString(),this.abortValidationController);if(!s)return Error("Aborted");if(!s.ok)return null;let o=await s.json(),n=Object.keys(o);return r=1===n.length&&n[0]&&Array.isArray(o[n[0]])?Array.isArray(o[n[0]])?o[n[0]][0]:o[n[0]]:o,this.validationCache.set(e,r),r}catch{return null}}async fetchData(e,t){let i;try{i=await fetch(e,{method:"GET",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},signal:t?.signal})}catch(e){if("AbortError"!==e.name)throw e}return i}constructor(e,t){super(e,t),c(this,"suggestionCache",void 0),c(this,"validationCache",void 0),c(this,"prefetchedSuggestions",void 0),c(this,"completeResultSetQueries",void 0),c(this,"providerContext",void 0),c(this,"suggestionEndpoint",void 0),c(this,"validationEndpoint",void 0),c(this,"abortSuggestionsController",void 0),c(this,"abortValidationController",void 0),c(this,"valueValidator",void 0),this.suggestionEndpoint="",this.validationEndpoint="",this.suggestionCache=new Map,this.completeResultSetQueries=new Set,this.validationCache=new Map,this.abortSuggestionsController=new AbortController,this.abortValidationController=new v,this.prefetchedSuggestions=new Map}};var h=i(40811),m=i(79607),f=i(91385),y=i(73272);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let x=/(?:>|<|>=|<=)?(\d+\.\d+)/g,_=/(?:>|<|>=|<=)?(\d+)/g,b=/^(?:>|<|>=|<=)?(\d{4}-\d{1,2}-\d{1,2})?$/,w=/^(?:>|<|>=|<=)?(\d{4}-\d{1,2})?$/,B=/^(?:>|<|>=|<=)?(\d{4})?$/,k=/^(?:>|<|>=|<=)?(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z?)$/,F=/^(?:>|<|>=|<=)?(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\+\d{2}:\d{2})$/,N=/^(?:>|<|>=|<=)?(@[A-Za-z]+)([+-]\d+[mdwqy])?$/,S=[">=","<=",">","<"];let StaticFilterProvider=class StaticFilterProvider extends u.e{getfilterKeys(){return[{key:this.key,aliases:this.aliases,displayName:this.displayName,description:this.description,priority:this.priority,icon:this.icon,options:this.options}]}getSuggestions(e,t,i,r){if(!this.shouldGetSuggestions(t))return null;let l=(0,n.DS)(t,r),a=t.provider.key,s=[];if((0,n.uT)(t)&&this.options.filterTypes.valueless&&!t.raw.startsWith("-")&&s.push((0,n.jL)(this.displayName,this.icon)),(0,n.uT)(t)&&this.options.filterTypes.hasValue&&!t.raw.startsWith("-")&&s.push((0,n.Ms)(this.displayName,this.icon)),this.options.filterTypes.exclusive&&""===l&&(0,n.aK)(t)&&!t.raw.startsWith("-")){let e=(0,n.m1)(a);s.unshift(e)}let u=S.find(e=>l===e||l===`${e}@`);if(!l&&!u)return s.concat(this.filterValues);for(let e of this.filterValues){let{value:t,displayName:r}=e,a=(0,n.I8)(t),d={...e,type:o.ak.Value},c=a&&!S.find(e=>a.startsWith(e));if(this.type===o.CH.Date&&c)d.value=`${u??""}${a}`;else{let t=!!a&&(0,f.qA)(l,a),s=!!i.aliasMatching&&e.aliases&&e.aliases.some(e=>(0,f.qA)(l,e)),o=!!r&&(0,f.qA)(l,r);if(!a||!t&&!o&&!s)continue}e.priority-=(0,m.dt)(l,a),s.push(d)}return s}async validateFilterBlockValues(e,t,i,r){let l=[],s=i.map((e,i)=>{if(!this.options.filterTypes.multiValue&&(t.operator===o.tl.Between&&i>1||t.operator!==o.tl.Between&&i>0)){l[i]={...e,valid:!1,validations:[{type:o.b.MultiValueUnsupported,message:a.D.filterMultiValueFalse(this.key)}]};return}let s=(0,n.M5)(e.value);if(!s){l[i]={...e,valid:!1,validations:[{type:o.b.EmptyValue,message:a.D.filterValueEmpty(this.key)}]};return}if(t.operator===o.tl.Between&&S.some(e=>s.startsWith(e))){l[i]={...e,valid:!1,validations:[{type:o.b.InvalidValue,message:a.D.filterInvalidValue(this.key,s)}]};return}let u=!0;switch(this.type){case o.CH.Boolean:case o.CH.Select:u=void 0!==this.filterValues.find(e=>(0,n.I8)(e.value)===s||r?.aliasMatching&&e.aliases?.includes(s));break;case o.CH.Text:u=!0;break;case o.CH.DecimalNumber:{let e=s.match(x);u=(e?.length??0)>0&&e?.[0]===s;break}case o.CH.Number:{let e=s.match(_);u=(e?.length??0)>0&&e?.[0]===s;break}case o.CH.Date:if(s)if("*"===s)u=!0;else if(N.test(s)){let[,e]=N.exec(s)??[];u=void 0!==this.filterValues.find(t=>(0,n.I8)(t.value)===e)}else{let e=null;F.test(s)?e=F.exec(s)?.[1]??null:k.test(s)?e=k.exec(s)?.[1]??null:b.test(s)?e=b.exec(s)?.[1]??null:w.test(s)?e=w.exec(s)?.[1]??null:B.test(s)&&(e=B.exec(s)?.[1]??null),u=!!e&&!isNaN(Date.parse(e))}break;default:u=!0}let d=this.filterValues.find(e=>(0,n.SH)((0,n.I8)(e.value)??"",s));d?l[i]={...e,...d,valid:!0,value:e.value}:l[i]={...e,valid:u}});return await Promise.all(s),Object.values(l)}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,leadingVisual:(0,y.d)({value:e})}}constructor(e,t,i){super(e,i),g(this,"filterValues",void 0),this.filterValues=t.map(e=>({...e,ariaLabel:`${e.displayName}, ${this.displayName}`}))}};let ArchivedFilterProvider=class ArchivedFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.archived,l.sS.archived,{...e,filterTypes:{...e?.filterTypes,multiValue:!1,valueless:!1}}),this.type=o.CH.Boolean}};let ClosedFilterProvider=class ClosedFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.closed,l.sS.closed,e),this.type=o.CH.Date}};let CommentsFilterProvider=class CommentsFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{multiValue:!1,valueless:!1}};super(l._i.comments,l.sS.comments,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=o.CH.Number}};let CreatedFilterProvider=class CreatedFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{valueless:!1}};super(l._i.created,l.sS.created,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=o.CH.Date}};let DraftFilterProvider=class DraftFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{multiValue:!1,valueless:!1}};super(l._i.draft,l.sS.draft,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=o.CH.Boolean}};let InteractionsFilterProvider=class InteractionsFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{multiValue:!1,valueless:!1}};super(l._i.interactions,l.sS.interactions,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=o.CH.Number}};let IsFilterProvider=class IsFilterProvider extends StaticFilterProvider{constructor(e,t,i=!1){let r=e?.map(e=>l.VT[e]).filter(Boolean)??[];i||(r=r.filter(e=>"blocked"!==e.value&&"blocking"!==e.value));let a={filterTypes:{valueless:!1}};super(l._i.is,r?.length>0?r:l.sS.is,{...a,...t,filterTypes:{...a.filterTypes,...t?.filterTypes}}),this.type=o.CH.Select}};let InFilterProvider=class InFilterProvider extends StaticFilterProvider{constructor(e,t){let i=e?.map(e=>l.oO[e]).filter(Boolean)??[],r={filterTypes:{valueless:!1,multiValue:!0}};super(l._i.in,i?.length>0?i:l.sS.in,{...r,...t,filterTypes:{...r.filterTypes,...t?.filterTypes}}),this.type=o.CH.Select}};let LinkedFilterProvider=class LinkedFilterProvider extends StaticFilterProvider{constructor(e,t){let i={...t,filterTypes:{...t?.filterTypes,multiValue:!1,valueless:!1}},r=e?.map(e=>l.Ez[e]).filter(Boolean)??[];super(l._i.linked,r?.length>0?r:l.sS.linked,i),this.type=o.CH.Select}};let MergedFilterProvider=class MergedFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.merged,l.sS.merged,{...e,filterTypes:{...e?.filterTypes,multiValue:!1}}),this.type=o.CH.Date}};let ReactionsFilterProvider=class ReactionsFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.reactions,l.sS.reactions,{...e,filterTypes:{multiValue:!1,valueless:!1,...e?.filterTypes}}),this.type=o.CH.Number}};let ReasonFilterProvider=class ReasonFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.reason,l.sS.reason,e),this.type=o.CH.Select}};let ReviewFilterProvider=class ReviewFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.review,l.sS.review,e),this.type=o.CH.Select}};let SortFilterProvider=class SortFilterProvider extends StaticFilterProvider{constructor(e,t){let i=[...e.map(e=>l.$c[e]).flat().filter(Boolean)??[],...e?.includes("reactions")?l.OV:[]];super(l._i.sort,i?.length>0?i:l.sS.sort,t),this.type=o.CH.Select}};let StateFilterProvider=class StateFilterProvider extends StaticFilterProvider{constructor(e="mixed",t){let i=(0,n.Lu)(e),r={filterTypes:{valueless:!1}};super(l._i.state,i,{...r,...t,filterTypes:{...r.filterTypes,...t?.filterTypes}}),g(this,"stateContext",void 0),this.stateContext=e,this.type=o.CH.Select}};let StatusFilterProvider=class StatusFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.status,l.sS.status,e),this.type=o.CH.Select}};let UpdatedFilterProvider=class UpdatedFilterProvider extends StaticFilterProvider{constructor(e){super(l._i.updated,l.sS.updated,e),this.type=o.CH.Date}};let BooleanFilterProvider=class BooleanFilterProvider extends StaticFilterProvider{constructor(e,t){super(e,h.bO,{...t,...n.Oo}),this.type=h.CH.Boolean}};i(72082);var C=i(38621);let P={Open:"open"},I={NotPlanned:"not_planned"};var $=new WeakSet;let BaseIssueFilterProvider=class BaseIssueFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,$,j).bind(this),r)}getIconData(e){return e.state===P.Open?{icon:C.IssueOpenedIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))"}:e.stateReason===I.NotPlanned?{icon:C.SkipIcon,iconColor:"var(-fgColor-muted, var(--color-neutral-emphasis))"}:{icon:C.IssueClosedIcon,iconColor:"var(--fgColor-done, var(--color-done-fg))"}}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{displayName:i.title,value:r}:!e.context.repo&&!e.context.org&&{value:l.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e,t){super(e,t),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,$),this.suggestionEndpoint="/_filter/issues",this.validationEndpoint="/_filter/issues/validate",this.type=o.CH.Select}};function j(e,t){let{title:i,titleHtml:r,nwoReference:l}=e,a=3;return t&&(i&&(a-=(0,m.dt)(t,i)),l&&(a-=(0,m.dt)(t,l))),{type:o.ak.Value,displayName:r??i,ariaLabel:`${i}, ${this.displayName}`,description:l,inlineDescription:!1,value:l??"",priority:a,...this.getIconData(e)}}let ParentIssueFilterProvider=class ParentIssueFilterProvider extends BaseIssueFilterProvider{constructor(e,t){super(e||l._i.parentIssue,t),this.providerContext=new URLSearchParams({parent:"true"})}};let BlockingSearchFilterProvider=class BlockingSearchFilterProvider extends BaseIssueFilterProvider{constructor(e,t){super(e||l._i.blocking,{filterTypes:{hasValue:!0},...t})}};let BlockedBySearchFilterProvider=class BlockedBySearchFilterProvider extends BaseIssueFilterProvider{constructor(e,t){super(e||l._i.blockedBy,{filterTypes:{hasValue:!0},...t})}};var V=i(52123);function T(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let KeyOnlyFilterProvider=class KeyOnlyFilterProvider{getSuggestions(){return null}validateFilterBlockValues(e,t,i){return i.map(e=>({...e,valid:!0}))}getValueRowProps(){return{text:""}}constructor(e,t){T(this,"key",void 0),T(this,"displayName",void 0),T(this,"description",void 0),T(this,"priority",void 0),T(this,"type",o.CH.Text),T(this,"icon",void 0),T(this,"options",void 0),Object.assign(this,e),this.key=e.key,this.icon=e.icon,this.displayName=e.displayName??(0,n.ZH)(e.key),this.options={...V.dQ,...t,filterTypes:{...V.dQ.filterTypes,multiValue:!1,valueless:!1,...t?.filterTypes}},this.priority=this.options.priority}};let BaseFilterProvider=class BaseFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(l._i.base,e)}};let HeadFilterProvider=class HeadFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(l._i.head,e)}};let InBodyFilterProvider=class InBodyFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(l._i.inBody,e)}};let InCommentsFilterProvider=class InCommentsFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(l._i.inComments,e)}};let InTitleFilterProvider=class InTitleFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(l._i.inTitle,e)}};let ShaFilterProvider=class ShaFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(l._i.sha,e)}};let LabelFilterProvider=class LabelFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,this.processSuggestion.bind(this),r)}getIconData(e,t){return t.repo?{iconColor:e.color?.startsWith("#")?e.color:`#${e.color}`,description:e.description,inlineDescription:!1}:{icon:this.icon}}processSuggestion(e,t,i){let r=3;return t&&e.name&&(r-=(0,m.dt)(t,e.name)),{type:o.ak.Value,displayName:e.nameHtml??e.name,ariaLabel:`${e.name}, ${this.displayName}`,value:e.name??"",priority:r,...this.getIconData(e,i.context)}}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{iconColor:i.color?.startsWith("#")?i.color:`#${i.color}`,value:r,displayName:i.name,...this.getIconData(i,e.context)}:!e.context.repo&&!e.context.org&&{value:l.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon})}}constructor(e){super(l._i.label,e),this.suggestionEndpoint="/_filter/labels",this.validationEndpoint="/_filter/labels/validate",this.type=o.CH.Select}};var A=new WeakSet;let LanguageFilterProvider=class LanguageFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,A,E).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!i&&!!r&&{iconColor:i.color?.startsWith("#")?i.color:`#${i.color}`,value:r,displayName:i.name}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon})??void 0}}constructor(e){super(l._i.language,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,A),this.suggestionEndpoint="/_filter/languages",this.validationEndpoint="/_filter/languages/validate",this.type=o.CH.Select}};function E(e,t){let i=3;return t&&e.name&&(i-=(0,m.dt)(t,e.name)),{type:o.ak.Value,displayName:e.name,ariaLabel:`${e.name}, ${this.displayName}`,value:e.name??"",priority:i,iconColor:e.color?.startsWith("#")?e.color:`#${e.color}`}}var D=new WeakSet;let MilestoneFilterProvider=class MilestoneFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,D,R).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{value:r,displayName:i.title,description:i.description}:!e.context.repo&&!e.context.org&&{value:l.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e){super(l._i.milestone,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,D),this.suggestionEndpoint="/_filter/milestones",this.validationEndpoint="/_filter/milestones/validate",this.type=o.CH.Select}};function R(e,t){let{id:i,title:r,description:l}=e,a=3;return t&&r&&(a-=(0,m.dt)(t,r)),{id:i,type:o.ak.Value,displayName:r,ariaLabel:`${r}, ${this.displayName}`,value:r,description:l,inlineDescription:!1,priority:a,icon:this.icon}}function O(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let M={boolean:C.CheckCircleIcon,select:C.SingleSelectIcon,text:C.TypographyIcon};let NestedFilterProvider=class NestedFilterProvider{constructor(e,t){O(this,"subKeys",void 0),O(this,"filterProviders",void 0);let{subKeys:i,...r}=e;this.subKeys=i,this.filterProviders=i.map(e=>{let i={...e,type:e.type,key:`${r.key}.${e.key}`,displayName:e.displayName??e.key,description:e.description,priority:h.a6,icon:e.icon??M[e.type]};if(e.type===o.CH.Boolean)return new BooleanFilterProvider(i,t);if(e.type!==o.CH.Select)return new KeyOnlyFilterProvider(i,e.options);{let t=new StaticFilterProvider(i,e.values,{...e.options,filterTypes:{...h.dQ.filterTypes,...e.options?.filterTypes}});return t.type=i.type,t}}),this.filterProviders.push(new StaticFilterProvider({...r,key:`${r.key}.`},[],t))}};var L=i(96235),U=new WeakSet;let OrgFilterProvider=class OrgFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,U,W).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!i&&!!r&&{avatar:i.avatarUrl?{url:i.avatarUrl,type:o.uW.Org}:void 0,value:r,displayName:i.name}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e){super(l._i.org,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,U);let t=e?.businessSlug;this.suggestionEndpoint=t?(0,L.MeY)({businessSlug:t}):"/_filter/organizations",this.validationEndpoint=t?(0,L.ohj)({businessSlug:t}):"/_filter/organizations/validate",this.type=o.CH.Select}};function W(e,t){let{name:i,login:r,avatarUrl:l}=e,a=3;return t&&(i&&(a-=(0,m.dt)(t,i)),r&&(a-=(0,m.dt)(t,r))),{type:o.ak.Value,displayName:i,ariaLabel:`${i}, ${this.displayName}`,value:(0,n.$4)(r)??"",description:r,inlineDescription:!0,priority:a,icon:l?void 0:this.icon,avatar:l?{url:l,type:o.uW.Org}:void 0}}var H=new WeakSet;let ProjectFilterProvider=class ProjectFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,H,G).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{displayName:i.title,value:r}:!e.context.repo&&!e.context.org&&{value:l.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block"}}constructor(e){super(l._i.project,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,H),this.suggestionEndpoint="/_filter/projects",this.validationEndpoint="/_filter/projects/validate",this.type=o.CH.Select}};function G(e,t){let{title:i,value:r}=e,l=3;return t&&(i&&(l-=(0,m.dt)(t,i)),r&&(l-=(0,m.dt)(t,r))),{type:o.ak.Value,displayName:i,ariaLabel:`${i}, ${this.displayName}`,value:(0,n.$4)(r)??"",description:r,inlineDescription:!1,priority:l}}var K=new WeakSet;let RepositoryFilterProvider=class RepositoryFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,K,Q).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!i&&!!r&&{displayName:i.name,value:r}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e){super(l._i.repo,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,K),this.suggestionEndpoint="/_filter/repositories",this.validationEndpoint="/_filter/repositories/validate",this.type=o.CH.Select}};function Q(e,t){let{nameWithOwner:i}=e,r=3;return t&&i&&(r-=(0,m.dt)(t,i)),{type:o.ak.Value,displayName:i,ariaLabel:`${i}, ${this.displayName}`,value:i,inlineDescription:!1,priority:r,icon:this.icon}}var q=new WeakSet;let BaseTeamFilterProvider=class BaseTeamFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,q,z).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{avatar:i.avatarUrl?{url:i.avatarUrl,type:o.uW.Team}:void 0,value:r,displayName:i.name}:!e.context.repo&&!e.context.org&&{value:l.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"inline",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon})}}constructor(e,t,i){super(e,i),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,q),this.suggestionEndpoint="/_filter/teams",this.validationEndpoint="/_filter/teams/validate",this.type=o.CH.Select}};function z(e,t){let{name:i,combinedSlug:r,avatarUrl:l}=e,a=3;return t&&(i&&(a-=(0,m.dt)(t,i)),r&&(a-=(0,m.dt)(t,r))),{type:o.ak.Value,displayName:i,value:(0,n.$4)(r)??"",ariaLabel:`${i}, ${this.displayName}`,description:r,inlineDescription:!0,priority:a,icon:l?void 0:this.icon,avatar:l?{url:l,type:o.uW.Team}:void 0}}let TeamFilterProvider=class TeamFilterProvider extends BaseTeamFilterProvider{constructor(e,t){super(l._i.team,e,t)}};let TeamReviewRequestedFilterProvider=class TeamReviewRequestedFilterProvider extends BaseTeamFilterProvider{constructor(e,t){super(l._i.teamReviewRequested,e,t)}};function X(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let J="@copilot",Z={type:o.ak.Value,value:"@me",ariaLabel:"@me, Signed-in user",displayName:"Me",description:"Signed-in user",inlineDescription:!0,priority:1,icon:C.ArrowSwitchIcon,iconColor:"var(--fgColor-done, var(--color-done-fg))"},Y=e=>({type:o.ak.Value,value:"*",displayName:`Has ${e.toLocaleLowerCase()}`,ariaLabel:`Has ${e}, ${e}`,priority:1,icon:C.PlusCircleIcon});let BaseUserFilterProvider=class BaseUserFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){this.includeBots&&e.addQueryParam("include_bots","1");let l=await this.processSuggestions(e,t,this.processSuggestion.bind(this),r)??[],a=(0,n.DS)(t,r),s=+(l[0]?.type===o.ak.NoValue);if(this.showAtMe&&(""===a||(0,f.qA)(a,"@me"))&&(0,n.aK)(t)&&t.value?.values.findIndex(e=>"@me"===e.value)<0&&(l.splice(s,0,Z),s++),(""===a||(0,f.qA)(a,J))&&(0,n.aK)(t)&&t.value?.values.findIndex(e=>e.value===J)<0){let e=l.findIndex(e=>e.value===J);if(e>-1){let t=l.splice(e,1);this.showAtCopilot&&(l.splice(s,0,t[0]),s++)}}return this.showHasValue&&(""===a||(0,f.qA)(a,"*"))&&(0,n.aK)(t)&&t.value?.values.findIndex(e=>"*"===e.value)<0&&l.splice(s,0,Y(this.displayName)),l}processSuggestion(e,t){let{login:i,name:r,avatarUrl:l}=e,a=3;if(t){if(i){let e=(0,m.dt)(t,i);a-=(e!==m.IP?e:1)*.75}if(r){let e=(0,m.dt)(t,r);a-=(e!==m.IP?e:1)*.25}}return"@me"===i&&(a=1),{type:o.ak.Value,value:i,ariaLabel:`${i}, ${r}, ${this.displayName}`,description:r,inlineDescription:!0,priority:a,icon:l?void 0:this.icon,avatar:l?{url:l,type:o.uW.User}:void 0}}getMetaSuggestions(e){let t=[];return this.showAtMe&&"@me".startsWith(e)&&t.push(Z),this.showHasValue&&"*".startsWith(e)&&t.push(Y(this.displayName)),t}validateValue(e,t,i){let r=(0,n.M5)(t.value);return"@me"===r?{avatar:this.currentUserAvatarUrl?{url:this.currentUserAvatarUrl,type:o.uW.User}:void 0,value:r}:this.showHasValue&&"*"===r||i&&this.showAtCopilot&&r===J?{avatar:void 0,value:r}:i&&r?{avatar:i.avatarUrl?{url:i.avatarUrl,type:o.uW.User}:void 0,value:r,displayName:i.name}:!e.context.repo&&!e.context.org&&{value:l.rt}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"inline",leadingVisual:(0,y.d)({value:e,providerIcon:this.icon})}}constructor(e,t,i){super(t,i),X(this,"showAtMe",void 0),X(this,"showAtCopilot",void 0),X(this,"showHasValue",void 0),X(this,"currentUserLogin",void 0),X(this,"currentUserAvatarUrl",void 0),X(this,"includeBots",void 0),this.suggestionEndpoint="/_filter/users",this.validationEndpoint="/_filter/users/validate",this.currentUserLogin=e.currentUserLogin,this.currentUserAvatarUrl=e.currentUserAvatarUrl,this.includeBots=e.includeBots??!1,this.type=o.CH.User,this.showAtMe=e?.showAtMe??!0,this.showHasValue=e?.showHasValue??!1,this.showAtCopilot=e?.showAtCopilot??!1}};let AssigneeFilterProvider=class AssigneeFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.assignee,t)}};let AuthorFilterProvider=class AuthorFilterProvider extends BaseUserFilterProvider{constructor(e,t){let i={filterTypes:{multiValue:!1,valueless:!1}};super({...e,includeBots:!0},l.yV.author,{...i,...t,filterTypes:{...i.filterTypes,...t?.filterTypes}})}};let CommenterFilterProvider=class CommenterFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.commenter,t)}};let InvolvesFilterProvider=class InvolvesFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.involves,t)}};let MentionsFilterProvider=class MentionsFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.mentions,t)}};let ReviewedByFilterProvider=class ReviewedByFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.reviewedBy,t)}};let ReviewRequestedFilterProvider=class ReviewRequestedFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.reviewRequested,t)}};let UserFilterProvider=class UserFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.user,t)}};let UserReviewRequestedFilterProvider=class UserReviewRequestedFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,l.yV.userReviewRequested,t)}}},62884:(e,t,i)=>{i.d(t,{A:()=>ValueValidator,e:()=>RootFilterProvider});var r=i(52123),l=i(90678),a=i(71073);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let RootFilterProvider=class RootFilterProvider{shouldGetSuggestions(e){return e&&e.type!==l._B.Space&&(0,a.Bt)(e,this.options.filterTypes.multiValue)}constructor(e,t){s(this,"key",void 0),s(this,"aliases",void 0),s(this,"displayName",void 0),s(this,"description",void 0),s(this,"priority",void 0),s(this,"type",void 0),s(this,"icon",void 0),s(this,"options",void 0),Object.assign(this,e),this.key=e.key,this.icon=e.icon,this.type=l.CH.Text,this.displayName=e.displayName??(0,a.ZH)(e.key),this.options={...r.dQ,priority:e.priority,...t,filterTypes:{...r.dQ.filterTypes,...t?.filterTypes}},this.priority=this.options.priority}};let ValueValidator=class ValueValidator extends RootFilterProvider{validateValue(e,t,i){return!!i&&i}}},14653:(e,t,i)=>{i.d(t,{Q:()=>ValuePresenceFilterProvider});var r=i(79607),l=i(91385),a=i(52123),s=i(491),o=i(90678),n=i(71073),u=i(73272),d=i(62884);let c={[o.ak.HasValue]:s._i.has,[o.ak.NoValue]:s._i.no};let ValuePresenceFilterProvider=class ValuePresenceFilterProvider extends d.e{getSuggestions(e,t,i,a){if(!this.shouldGetSuggestions(t))return null;let s=(0,n.DS)(t,a),u=[];if(!s)return this.filterValues.filter(t=>(0,n.Di)(e,this.key,(0,n.M5)(t.value)).length<1);for(let t of this.filterValues){let{value:i,displayName:a}=t,d=(0,n.I8)(i),c=!!d&&(0,l.qA)(s,d),p=!!a&&(0,l.qA)(s,a);!((0,n.Di)(e,this.key,(0,n.M5)(d)).length>0)&&d&&(c||p)&&(t.priority-=(0,r.dt)(s,d),u.push({...t,type:o.ak.Value}))}return u}validateFilterBlockValues(e,t,i){return i.map((r,l)=>{let a=(0,n.I8)(r.value),s=(0,n.Di)(e,this.key,(0,n.M5)(a)).sort((e,t)=>e.id-t.id),o=!!a&&!!this.filterValues.find(e=>(0,n.SH)((0,n.I8)(e.value)??"",a));return s[0]?.id!==void 0&&(t.id!==s[0].id||i.findIndex(e=>e.value===a)<l)&&(o=!1),{...r,valid:o}})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",leadingVisual:(0,u.d)({value:e})}}constructor(e,t,i){super(c[t],i),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"filterValues",void 0),this.options={...a.dQ,...i,filterTypes:{...a.dQ.filterTypes,valueless:!1,...i?.filterTypes}},this.type=o.CH.Select,this.filterValues=e.map(e=>({...e,ariaLabel:`${e.displayName}, ${this.displayName}`}))}}},40811:(e,t,i)=>{i.d(t,{uW:()=>_.uW,_B:()=>_._B,_i:()=>ec._i,$D:()=>ec.$D,dJ:()=>ez,tl:()=>_.tl,CH:()=>_.CH,n5:()=>eG,ak:()=>_.ak,a6:()=>ec.a6,b9:()=>_.b9,FT:()=>_.FT,bO:()=>ec.bO,yV:()=>ec.yV,Xl:()=>eU,b:()=>_.b,dQ:()=>ec.dQ});var r=i(74848),l=i(26033),a=i(52811),s=i(98386),o=i(75367),n=i(27389),u=i(34164),d=i(96540),c=i(27851),p=i(38621),v=i(53526),h=i(55847),m=i(9852),f=i(46632),y=i(18991),g=i(82759),x=i(39632),_=i(90678),b=i(71073),w=i(10569),B=i(15385);let k={Octicon_0:"AddFilterButton-module__Octicon_0--kSneW",ActionMenu_Overlay_0:"AddFilterButton-module__ActionMenu_Overlay_0--qJJZN",ActionList_0:"AddFilterButton-module__ActionList_0--JmaUA",ActionList_Item_0:"AddFilterButton-module__ActionList_Item_0--HDBEv"},F=(0,d.forwardRef)(({size:e,filterProviders:t,addNewFilterBlock:i},l)=>{let[a,o]=(0,d.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Q,{size:e,ref:l,onClick:()=>o(!a),...(0,s.G)("afd-add-filter"),children:[(0,r.jsx)(p.PlusIcon,{className:k.Octicon_0}),"Add a filter"]}),(0,r.jsx)(w.W,{anchorRef:l,open:a,onOpenChange:o,children:(0,r.jsx)(w.W.Overlay,{className:k.ActionMenu_Overlay_0,children:(0,r.jsx)(B.l,{...(0,s.G)("afd-add-filter-options"),className:k.ActionList_0,children:t.map(e=>{let{icon:t}=e;return(0,r.jsxs)(B.l.Item,{onSelect:()=>i(e),role:"menuitem",className:k.ActionList_Item_0,children:[t&&(0,r.jsx)(B.l.LeadingVisual,{children:(0,r.jsx)(t,{})}),e.displayName??e.key]},`advanced-filter-add-provider-${e.key}`)})})})})]})});F.displayName="AddFilterButton";let N={Box_0:"AdvancedFilterDialog-module__Box_0--VpPcN",Box_1:"AdvancedFilterDialog-module__Box_1--kqOOK",Box_2:"AdvancedFilterDialog-module__Box_2--jbFK3",Box_3:"AdvancedFilterDialog-module__Box_3--w5Amr",Box_4:"AdvancedFilterDialog-module__Box_4--YFH2n",nonEmpty:"AdvancedFilterDialog-module__nonEmpty--yIJ8S",Button_0:"AdvancedFilterDialog-module__Button_0--vFOss",standaloneButton:"AdvancedFilterDialog-module__standaloneButton--qoffh"},S={Box_0:"BlankState-module__Box_0--AmMgB",Box_1:"BlankState-module__Box_1--AjzUe",Box_2:"BlankState-module__Box_2--jdCHM",Box_3:"BlankState-module__Box_3--cn1nb"},C=({isNarrowBreakpoint:e,addFilterButtonMobileRef:t,filterProviders:i,addNewFilterBlock:l})=>(0,r.jsxs)("div",{className:S.Box_0,...(0,s.G)("afd-no-content"),children:[(0,r.jsx)("div",{className:S.Box_1,children:"Build complex filter queries"}),(0,r.jsx)("div",{className:S.Box_2,children:"To start building your query add your first filter using the button below."}),(0,r.jsx)("div",{className:S.Box_3,children:(0,r.jsx)(F,{size:e?"medium":"small",ref:t,filterProviders:i,addNewFilterBlock:l})})]});try{C.displayName||(C.displayName="BlankState")}catch{}var P=i(91385),I=i(491);let $={Box_0:"AdvancedFilterItem-module__Box_0--G8DZm",Box_1:"AdvancedFilterItem-module__Box_1--yo8eF",Text_0:"AdvancedFilterItem-module__Text_0--BBmW3",Box_2:"AdvancedFilterItem-module__Box_2--aysFO",Box_3:"AdvancedFilterItem-module__Box_3--A_onh",Box_4:"AdvancedFilterItem-module__Box_4--qnVMk",Text_1:"AdvancedFilterItem-module__Text_1--_HTwo",RemoveFilterButton_0:"AdvancedFilterItem-module__RemoveFilterButton_0--dhVAp",Box_5:"AdvancedFilterItem-module__Box_5--NLCm7",Box_6:"AdvancedFilterItem-module__Box_6--JxlLs",Box_7:"AdvancedFilterItem-module__Box_7--MpT3t",Box_8:"AdvancedFilterItem-module__Box_8--cm6Lh"},j={Button_0:"OperatorSelect-module__Button_0--i150F",Octicon_0:"OperatorSelect-module__Octicon_0--PENt3"},V=({filterBlock:e,index:t,setFilterOperator:i})=>(0,r.jsxs)(w.W,{children:[(0,r.jsx)(w.W.Anchor,{children:(0,r.jsx)(h.Q,{size:"small",disabled:!e.provider,id:`afd-row-${t}-operator`,"aria-label":`Operator ${t+1}`,className:j.Button_0,block:!0,alignContent:"start",trailingAction:()=>(0,r.jsx)(p.TriangleDownIcon,{className:j.Octicon_0}),children:e.operator?I._W[e.operator]:I._W[_.tl.Is]})}),(0,r.jsx)(w.W.Overlay,{width:"auto",children:(0,r.jsx)(B.l,{selectionVariant:"single",children:(0,b.nV)(e.provider).map(t=>(0,r.jsx)(B.l.Item,{onSelect:()=>i(t),selected:t===e.operator,children:I._W[t]},`advanced-filter-item-${e.id}-operator-${t}`))})})]});try{V.displayName||(V.displayName="OperatorSelect")}catch{}var T=i(52464);let A={Octicon_0:"QualifierSelect-module__Octicon_0--e5BjZ",Button_0:"QualifierSelect-module__Button_0--Sx55F",ActionMenu_Overlay_0:"QualifierSelect-module__ActionMenu_Overlay_0--kV8Dg",ActionList_0:"QualifierSelect-module__ActionList_0--ePVF_"},E=({filterBlock:e,filterProviders:t,index:i,setFilterProvider:l})=>{let a=e?.provider?.icon;return(0,r.jsxs)(w.W,{children:[(0,r.jsx)(w.W.Anchor,{children:(0,r.jsx)(h.Q,{id:`afd-row-${i}-qualifier`,"aria-label":`Qualifier ${i+1}`,className:(0,u.$)("advanced-filter-item-qualifier",A.Button_0),size:"small",block:!0,alignContent:"start",leadingVisual:()=>a?(0,r.jsx)(a,{className:A.Octicon_0}):null,trailingAction:()=>(0,r.jsx)(p.TriangleDownIcon,{className:A.Octicon_0}),children:(0,b.sF)(e)?e?.provider?.displayName??e?.provider?.key??"Select a filter":T.A})}),(0,r.jsx)(w.W.Overlay,{className:A.ActionMenu_Overlay_0,children:(0,r.jsx)(B.l,{selectionVariant:"single",className:A.ActionList_0,children:t.map((t,i)=>{let{icon:a}=t;return(0,r.jsxs)(B.l.Item,{onSelect:()=>l(t),selected:t.key===e.provider?.key,children:[a&&(0,r.jsx)(B.l.LeadingVisual,{children:(0,r.jsx)(a,{})}),t.displayName??t.key]},`advanced-filter-item-${e.id}-provider-${t.key}-${i}`)})})})]})};try{E.displayName||(E.displayName="QualifierSelect")}catch{}var D=i(87330);let R={IconButton_0:"RemoveFilterButton-module__IconButton_0--E6OIE"},O=({ariaLabel:e,onClick:t,className:i,testId:l=""})=>(0,r.jsx)(D.K,{icon:p.XIcon,size:"small",variant:"invisible","aria-label":e,onClick:t,className:(0,u.$)(i,R.IconButton_0),...(0,s.G)(l)});try{O.displayName||(O.displayName="RemoveFilterButton")}catch{}var M=i(21114),L=i(9591);let U={Button_0:"BooleanValueSelect-module__Button_0--uyDWd",Octicon_0:"BooleanValueSelect-module__Octicon_0--sd1Va"};var W=i(39459),H=i(70892);let G={Box_0:"ValuePlaceholder-module__Box_0--sRIos",Box_1:"ValuePlaceholder-module__Box_1--AzhbD",Octicon_0:"ValuePlaceholder-module__Octicon_0--nMPaj",AvatarStack:"ValuePlaceholder-module__AvatarStack--UPe_t"},K=({filterBlock:e})=>{let t=e.value?.values.filter(e=>e.valid&&""!==e.value)??[];if(0===t.length)return(0,r.jsx)("div",{className:G.Box_0,children:"Make a selection"});let i=e.value?.values?.[0]?.displayName,l=e.value?.values?.[0]?.name,a=e.value?.values?.[0]?.description,s=(0,b.I8)(e.value?.values?.[0]?.value),o=`${t.length} selected`;return 1===t.length&&(o=i??l??a??s),(0,r.jsxs)("div",{className:G.Box_1,children:[(0,r.jsx)(Q,{filterBlock:e}),o]})},Q=({filterBlock:e})=>{if(!e.value?.values||e.value.values.length<1)return null;if(e.provider?.type===_.CH.User){let t=[];for(let i of e.value?.values??[]){let l=i?.avatar?.url??i?.avatarUrl;l&&t.push((0,r.jsx)(W.r,{src:l,size:16,alt:i.displayName??(0,b.I8)(i.value)??""},`${e.provider.key}-${e.id}-avatar-${(0,b.I8)(i.value)}`))}if(t.length>0)return(0,r.jsx)(H.A,{disableExpand:!0,size:16,className:G.AvatarStack,children:t})}if(e.value?.values?.length===1){let t=e.provider?.filterValues?.find(t=>t.value===e.value?.values?.[0]?.value),i=t?.icon;if(i)return(0,r.jsx)(i,{className:G.Octicon_0})}return null};try{K.displayName||(K.displayName="ValuePlaceholder")}catch{}try{Q.displayName||(Q.displayName="ValuePlaceholderIcon")}catch{}let q=({index:e,filterBlock:t,setFilterValues:i})=>(0,r.jsxs)(w.W,{children:[(0,r.jsx)(w.W.Anchor,{children:(0,r.jsx)(h.Q,{size:"small",className:U.Button_0,"aria-label":`Value ${e+1}`,trailingVisual:()=>(0,r.jsx)(p.TriangleDownIcon,{className:U.Octicon_0}),...(0,s.G)("afd-row-value-select-boolean-button"),children:(0,r.jsx)(K,{filterBlock:t})})}),(0,r.jsx)(w.W.Overlay,{children:(0,r.jsxs)(B.l,{selectionVariant:"single",...(0,s.G)("afd-row-value-select-list"),children:[(0,r.jsx)(B.l.Item,{onSelect:()=>i(!0),selected:void 0===(0,b.I8)(t.value?.values[0]?.value)||"true"===(0,b.I8)(t.value?.values[0]?.value),children:"True"}),(0,r.jsx)(B.l.Item,{onSelect:()=>i(!1),selected:"false"===(0,b.I8)(t.value?.values[0]?.value),children:"False"})]})})]});try{q.displayName||(q.displayName="BooleanValueSelect")}catch{}let z={Octicon_0:"ValueSelect-module__Octicon_0--sV5zM",Box_0:"ValueSelect-module__Box_0--nPnZ6",TextInput_0:"ValueSelect-module__TextInput_0--uGUsB",Box_1:"ValueSelect-module__Box_1--mcNDC",TextInput_1:"ValueSelect-module__TextInput_1--osf96",Button_0:"ValueSelect-module__Button_0--ydJ6J",Overlay:"ValueSelect-module__Overlay--nk6DQ"},X=new Set([_.CH.Select,_.CH.User]),J=e=>e&&X.has(e),Z=e=>e&&e===_.CH.Date,Y=new Set([_.CH.Number,_.CH.Date,_.CH.Text]),ee=e=>e&&Y.has(e),et=({filterBlock:e,setValuesFilter:t,setFilterValues:i,setFilterFrom:l,setFilterText:a,setFilterTo:o,valueElements:n,index:c,selectedFilteredValues:v})=>{let[m,f]=(0,d.useState)(!1);(0,d.useEffect)(()=>{m||t("")},[m,t]);let y=(0,d.useMemo)(()=>({renderAnchor:({...t})=>(0,r.jsx)(h.Q,{...t,id:`afd-row-${c}-value`,size:"small",alignContent:"start",disabled:!e.operator,"aria-label":`Value ${c+1}`,className:(0,u.$)("advanced-filter-item-value",z.Button_0),trailingVisual:()=>(0,r.jsx)(p.TriangleDownIcon,{className:z.Octicon_0}),...(0,s.G)("afd-row-value-select-button"),children:(0,r.jsx)("div",{className:z.Box_0,children:(0,r.jsx)(K,{filterBlock:e})})}),placeholderText:"Filter values",open:m,onOpenChange:f,items:n,onFilterChange:t,showItemDividers:!1,overlayProps:{width:"small",className:z.Overlay},...(0,s.G)("afd-row-value-select")}),[m,n,t,c,e]);if(J(e.provider?.type))return Array.isArray(v),(0,r.jsx)(M.X,{...y,selected:v,onSelectedChange:i});if(e.provider?.type===_.CH.Boolean)return(0,r.jsx)(q,{index:c,filterBlock:e,setFilterValues:i});if(ee(e.provider?.type)){if(e.operator===_.tl.Between)return(0,r.jsx)(ei,{index:c,fromValue:(0,b.I8)(e.value?.values[0]?.value)??"",toValue:(0,b.I8)(e.value?.values[1]?.value)??"",setFromValue:l,setToValue:o});let t=Z(e.provider?.type)?"YYYY-MM-DD":`Enter a ${e.provider?.type.toString().toLowerCase()??"value"}`,i=e.provider?.type===_.CH.Number?"number":"text";return(0,r.jsx)(L.A,{"aria-label":`Value ${c+1}`,size:"small",type:i,value:e.value?.raw,onChange:a,placeholder:t,className:z.TextInput_0,...(0,s.G)(`afd-row-${c}`)})}return(0,r.jsx)(L.A,{"aria-label":`Value ${c+1}`,size:"small",value:e.value?.raw,onChange:a,placeholder:"Enter search text",className:z.TextInput_0,...(0,s.G)(`afd-row-${c}`)})},ei=({index:e,fromValue:t,toValue:i,setFromValue:l,setToValue:a})=>(0,r.jsxs)("div",{className:z.Box_1,children:[(0,r.jsx)(L.A,{"aria-label":`Value ${e+1} From`,size:"small",value:t,onChange:l,placeholder:"From",className:z.TextInput_1,...(0,s.G)(`afd-row-${e}-from`)}),(0,r.jsx)("span",{children:"-"}),(0,r.jsx)(L.A,{"aria-label":`Value ${e+1} To`,size:"small",value:i,onChange:a,placeholder:"To",className:z.TextInput_1,...(0,s.G)(`afd-row-${e}-to`)})]});try{et.displayName||(et.displayName="ValueSelect")}catch{}try{ei.displayName||(ei.displayName="BetweenFilterInputs")}catch{}let er=({index:e,filterBlock:t,filterProviders:i,updateFilterBlock:l,deleteFilterBlock:a})=>{let{config:o}=(0,g.U2)(),{filterQuery:n}=(0,g.g0)(),[c,p]=(0,d.useState)(t.provider?.filterValues??[]),[v,h]=(0,d.useState)(""),[m,f]=(0,d.useState)(t.provider?.options?.filterTypes.multiValue?[]:void 0),y=(0,d.useMemo)(()=>(0,b.sF)(t)?c.filter(e=>!(v.length>0)||(0,P.qA)(v,(0,b.I8)(e.value)??"")||(0,P.qA)(v,e.displayName??"")):[],[t,v,c]),w=(0,d.useMemo)(()=>{let e=Array.from(i);return t.provider&&!i.find(e=>e.key===t.provider?.key)&&e.push(t.provider),e.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0)},[t.provider,i]),B=(0,d.useMemo)(()=>{let e=Array.isArray(m)?[...m]:m?[m]:[];return y?.reduce((e,i)=>{let r=t.provider?.getValueRowProps(i);return -1===(e.findIndex(e=>e.text===r?.text)??-1)&&e.push({...r,leadingVisual:r?.leadingVisual?()=>r.leadingVisual:void 0,trailingVisual:r?.trailingVisual?()=>r.trailingVisual:void 0}),e},e)},[t.provider,y,m]),k=(0,d.useCallback)(e=>{if(e.type!==_.CH.RawText){let i=t.provider?.type===_.CH.RawText&&e.type===_.CH.Text,r=e.type===t.provider?.type||i?t.value:{raw:"",values:[]};l({...t,key:{value:e.key,valid:!0},provider:e,operator:(0,b.nV)(e)[0],value:r})}else{let e=t.provider?.type===_.CH.Text&&t.value?t.value:{raw:"",values:[]};l({...t,key:void 0,provider:x.J,operator:(0,b.nV)(x.J)[0],raw:e.raw,value:e})}},[t,l]),F=(0,d.useCallback)(e=>{let i={};if(t.value&&!I.BP.includes(e)){let e=[];i={value:{values:t.value.values.map(t=>{let i=(0,b.M5)(t.value)?.replace(/^[<>]=?/g,"").replaceAll("..","")??"";return e.push(i),{...t,value:i}})??[],raw:e.join(o.valueDelimiter)}}}l({...t,operator:e,...i})},[o.valueDelimiter,t,l]),N=(0,d.useCallback)(e=>{let i=[];if(void 0===e)i=[];else if("boolean"==typeof e)i=[{value:e.toString(),displayName:(0,b.ZH)(e.toString())}];else if(t.provider?.options?.filterTypes.multiValue&&Array.isArray(e)){let r=t.value?.values.filter(e=>!(0,P.qA)(v,(0,b.I8)(e.value)??"")&&!(0,P.qA)(v,e.displayName??""));for(let t of(r&&(i=r),e)){let e=c.find(e=>e.displayName===t.text||e.value===t.text);e&&i.push(e)}}else{let t=e.text,r=c.find(e=>e.displayName===t||e.value===t);if(void 0===r)return;i=[r]}i=i.filter(e=>e.value.length>0),f("boolean"==typeof e?void 0:e),l({...t,value:{...t.value,raw:i.map(e=>(0,b.I8)(e.value)).join(o.valueDelimiter),values:i.map(e=>({...e,valid:!0}))}})},[o.valueDelimiter,t,l,c,v]),S=(0,d.useCallback)(e=>{let i=[{value:e.target.value,valid:!0},t.value?.values?.[1]??{value:"",valid:!0}],r=`${(0,b.I8)(i[0]?.value)}..${(0,b.I8)(i[1]?.value)}`;l({...t,value:{values:i,raw:r}})},[t,l]),C=(0,d.useCallback)(e=>{let i=[t.value?.values?.[0]??{value:"",valid:!0},{value:e.target.value,valid:!0}],r=`${(0,b.I8)(i[0]?.value)}..${(0,b.I8)(i[1]?.value)}`;l({...t,value:{values:i,raw:r}})},[t,l]),j=(0,d.useCallback)(e=>{l({...t,value:{values:[{value:e.target.value,valid:!0}],raw:e.target.value}})},[t,l]);return(0,d.useEffect)(()=>{(async()=>{if(t.provider){let e=await t.provider.getSuggestions(n,{...t,value:{values:[{value:v,valid:!0}],raw:v}},o);p(e?e.filter(e=>e.type!==_.ak.NoValue&&!e.displayName?.startsWith("Exclude")):[])}})()},[o,t,t.provider,n,v]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("fieldset",{className:(0,u.$)(`advanced-filter-item-${e}`,$.Box_0),...(0,s.G)("afd-filter-row"),children:[(0,r.jsx)("legend",{className:$.Box_1,children:(0,r.jsx)("h2",{children:`Row ${e+1}`})}),(0,r.jsx)("span",{className:$.Text_0,children:e+1}),(0,r.jsxs)("div",{className:$.Box_2,children:[(0,r.jsxs)("div",{className:$.Box_3,children:[(0,r.jsxs)("div",{className:$.Box_4,children:[(0,r.jsx)("span",{className:$.Text_1,children:"Qualifier"}),(0,r.jsx)(E,{filterBlock:t,index:e,filterProviders:w,setFilterProvider:k})]}),(0,r.jsxs)("div",{className:$.Box_4,children:[(0,r.jsx)("span",{className:$.Text_1,children:"Operator"}),(0,r.jsx)(V,{setFilterOperator:F,filterBlock:t,index:e})]}),(0,r.jsxs)("div",{className:$.Box_4,children:[(0,r.jsx)("span",{className:$.Text_1,children:"Value"}),(0,r.jsx)(et,{filterBlock:t,index:e,setValuesFilter:h,valueElements:B,selectedFilteredValues:m,setFilterValues:N,setFilterFrom:S,setFilterText:j,setFilterTo:C})]}),(0,r.jsx)(O,{onClick:()=>a(e),ariaLabel:`Delete filter ${e+1}: ${t.provider?.displayName??t.provider?.key}, ${t.operator}, ${t.value?.raw}`,testId:`afd-filter-row-delete-${e}`,className:$.RemoveFilterButton_0})]}),(0,r.jsxs)("div",{className:$.Box_5,children:[(0,r.jsx)("div",{children:(0,r.jsx)(O,{onClick:()=>a(e),ariaLabel:`Delete filter ${e+1}: ${t.provider?.displayName??t.provider?.key}, ${t.operator}, ${t.value?.raw}`})}),(0,r.jsx)("div",{className:$.Box_6,children:e+1})]})]})]}),(0,r.jsx)("div",{className:$.Box_7,children:(0,r.jsx)("div",{className:$.Box_8})})]})};try{er.displayName||(er.displayName="AdvancedFilterItem")}catch{}let el={Box_0:"FilterList-module__Box_0--j9Mr4",Box_1:"FilterList-module__Box_1--C4Ox3",Box_2:"FilterList-module__Box_2--P3bNS",Box_3:"FilterList-module__Box_3--PpvTA",Box_4:"FilterList-module__Box_4--uvU7H",Text_0:"FilterList-module__Text_0--DLCnp"},ea=({filterBlocks:e,filterProviders:t,updateFilterBlock:i,deleteFilterBlock:l,isNarrowBreakpoint:a,addFilterButtonMobileLastRowRef:s,addNewFilterBlock:o})=>(0,r.jsxs)("div",{className:el.Box_0,children:[(0,r.jsxs)("div",{className:el.Box_1,children:[(0,r.jsx)("div",{className:el.Box_2}),(0,r.jsx)("div",{className:el.Box_3}),(0,r.jsx)("span",{className:el.Box_3,children:"Qualifier"}),(0,r.jsx)("span",{className:el.Text_0,children:"Operator"}),(0,r.jsx)("span",{className:el.Box_3,children:"Value"}),(0,r.jsx)("div",{})]}),e.map((e,a)=>(0,r.jsx)(er,{filterBlock:e,filterProviders:t,updateFilterBlock:i,index:a,deleteFilterBlock:l},`advanced-filter-item-${a}`)),(0,r.jsx)("div",{className:el.Box_4,children:(0,r.jsx)(F,{size:a?"medium":"small",ref:s,filterProviders:t,addNewFilterBlock:o})})]});try{ea.displayName||(ea.displayName="FilterList")}catch{}let es=e=>e.map((e,t)=>({...e,id:t})),eo=(0,f.A)(e=>(t,i)=>i.map(t=>{let i=(0,b.n$)(t,e);return t.raw===i?t:{...t,raw:i}})),en=({filterButtonVariant:e="normal",isStandalone:t=!1,dialogOpen:i,setDialogOpen:l})=>{let{config:a}=(0,g.U2)(),{filterQuery:f,filterProviders:w,updateFilter:B}=(0,g.g0)(),{hideSuggestions:k}=(0,g.Pt)(),S=(0,d.useRef)(null),{sendClickAnalyticsEvent:P}=(0,o.S)(),I=(0,d.useRef)(null),$=(0,d.useRef)(null),j=(0,d.useRef)(null),V=(0,n.tv)({regular:!1,narrow:!0},!1),T=(0,b.vU)(f.blocks),A=eo(a),[E,D]=(0,d.useReducer)(A,T),[R,O]=(0,d.useState)(!1),M=(0,v.S)(),L=(0,d.useCallback)(async()=>!R||await M({...y.D.advancedFilterDialogCloseConfirmation,confirmButtonType:"danger"}),[M,R]),U=(0,d.useMemo)(()=>{let e=Object.values(w).filter(e=>(e.options.filterTypes.multiKey||E.filter(t=>(0,b.sF)(t)&&t.provider?.key===e.key).length<1)&&e.options.support.status===_.b9.Supported);return a.disableAdvancedTextFilter&&"button"===a.variant||e.push(x.J),e.sort((e,t)=>e.key?.localeCompare(t.displayName??"")??0)},[a.disableAdvancedTextFilter,a.variant,E,w]),W=(0,d.useCallback)(()=>{D(T),O(!1)},[T]),H=(0,d.useCallback)(e=>{D([...E,{id:E.length,type:_._B.Filter,provider:e,key:(0,b.Nn)(e),operator:(0,b.nV)(e)[0],value:{raw:"",values:[{value:"",valid:!0}]}}]),O(!0),setTimeout(()=>{let e=document.querySelectorAll(".advanced-filter-item-qualifier");e[e.length-1]?.focus()},10)},[E]),G=(0,d.useCallback)(e=>{O(!0),D(E.map(t=>t.id===e.id?e:t))},[E]),K=(0,d.useCallback)(e=>{let t,i=E.filter((t,i)=>i!==e);D(es(i)),t=V?i.length>0?j:$:I,setTimeout(()=>t.current?.focus(),20)},[E,V]),Q=t?"button_only":"button_and_input",q=(0,d.useCallback)(()=>{W(),k(),l(!0),P({action:"open_advanced_filter_dialog",label:`variant:${Q}`})},[k,W,l,P,Q]),z=(0,d.useCallback)(async e=>{(e||await L())&&(l(!1),W(),setTimeout(()=>{S.current?.focus()},20))},[L,l,W]),X=(0,d.useCallback)(e=>{let t=e.filtersUsed.length>0?e.filtersUsed.join(","):"";P({action:"submit_filter_query",label:`variant:${Q};event_type:${_.FT.DialogSubmit};used_filter_providers:${t};nested_group_depth:${e.nestedGroupCount};submitted_by:filter_dialog`})},[P,Q]),J=(0,d.useCallback)(async()=>{let e=E.map(({raw:e})=>e).join(" ");B(e,e.length,X,_.FT.DialogSubmit),await z(!0)},[z,E,X,B]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Q,{ref:S,onClick:q,...(0,s.G)("advanced-filter-button"),"aria-label":"Advanced filter dialog",leadingVisual:p.FilterIcon,count:f.filterCount>0?f.filterCount:void 0,className:(0,u.$)(N.Button_0,t&&N.standaloneButton),children:"normal"===e&&"Filter"}),i&&(0,r.jsx)(m.l,{onClose:()=>z(),role:"dialog",title:"Advanced filters",position:{narrow:"fullscreen",regular:"center"},renderFooter:()=>(0,r.jsxs)("div",{className:N.Box_0,children:[(0,r.jsx)("div",{className:N.Box_1,children:(0,r.jsx)(F,{size:V?"medium":"small",ref:I,filterProviders:U,addNewFilterBlock:H})}),(0,r.jsxs)("div",{className:N.Box_2,children:[(0,r.jsx)(h.Q,{size:V?"medium":"small",onClick:()=>z(),...(0,s.G)("afd-cancel"),children:"Cancel"}),(0,r.jsx)(h.Q,{size:V?"medium":"small",variant:"primary",onClick:J,...(0,s.G)("afd-apply"),children:"Apply"})]})]}),renderBody:()=>(0,r.jsxs)("div",{className:(0,u.$)("advanced-filter-dialog-content",N.Box_4,E.length&&N.nonEmpty),...(0,s.G)("advanced-filter-dialog-content"),children:[(0,c.G7)("primer_react_unified_portal_root")?null:(0,r.jsx)("div",{id:"__primerPortalRoot__",style:{zIndex:10,position:"absolute",width:"100%"}}),(0,r.jsxs)("div",{className:N.Box_3,children:[E.length<1&&(0,r.jsx)(C,{isNarrowBreakpoint:V,addFilterButtonMobileRef:$,filterProviders:U,addNewFilterBlock:H}),E.length>0&&(0,r.jsx)(ea,{addFilterButtonMobileLastRowRef:j,addNewFilterBlock:H,deleteFilterBlock:K,filterBlocks:E,filterProviders:U,isNarrowBreakpoint:V,updateFilterBlock:G})]})]})})]})};try{en.displayName||(en.displayName="AdvancedFilterDialog")}catch{}let eu={clearButton:"ClearButton-module__clearButton--KL73f"},ed=(0,d.memo)(()=>{let{suspendFocus:e}=(0,g.Ge)(),{rawFilterRef:t,clearFilter:i}=(0,g.g0)();if(t?.current.length!==0)return(0,r.jsx)(D.K,{...(0,s.G)("filter-clear-query"),as:"button",className:eu.clearButton,"aria-label":"Clear filter",onMouseDown:t=>e(t.currentTarget),onKeyDown:t=>e(t.currentTarget),onClick:()=>i(),icon:p.XCircleFillIcon,variant:"invisible",size:"small"})});ed.displayName="ClearButton";var ec=i(52123),ep=i(16099);let ev={Box_0:"Filter-module__Box_0--BNVXr",Box_1:"Filter-module__Box_1--FEs2o",Box_2:"Filter-module__Box_2--cXSlw",leftRounded:"Filter-module__leftRounded--oMsKD",rightRounded:"Filter-module__rightRounded--uJJOd",hasSubmit:"Filter-module__hasSubmit--Kbnqi"};var eh=i(44308);let em={Box_0:"FilterInputIcon-module__Box_0--GpqZN",Octicon_0:"FilterInputIcon-module__Octicon_0--aj4CD"},ef=()=>(0,r.jsx)("div",{className:em.Box_0,children:(0,r.jsx)(p.SearchIcon,{"aria-label":"Search",className:em.Octicon_0})});try{ef.displayName||(ef.displayName="FilterInputIcon")}catch{}let ey={Box_0:"FilterInputWrapper-module__Box_0--chXAO",Box_1:"FilterInputWrapper-module__Box_1--vewob"},eg=({children:e,isStandalone:t=!1})=>t?(0,r.jsx)("div",{...(0,s.G)("filter-bar"),className:ey.Box_0,children:e}):(0,r.jsx)("div",{...(0,s.G)("filter-bar"),className:ey.Box_1,children:e});try{eg.displayName||(eg.displayName="FilterInputWrapper")}catch{}var ex=i(17515);let e_={Box_0:"Input-module__Box_0--Don6t",Box_1:"Input-module__Box_1--k2OuJ",Box_2:"Input-module__Box_2--aQerX",Box_3:"Input-module__Box_3--gjsry",Box_4:"Input-module__Box_4--GVHsf"},eb={Box_0:"StyledInput-module__Box_0--fI46v",Box_1:"StyledInput-module__Box_1--_Dcqj",Box_2:"StyledInput-module__Box_2--JRyid",KeyBlock_0:"StyledInput-module__KeyBlock_0--Y18rv"},ew={Text_0:"StyledInputBlocks-module__Text_0--SEA41"},eB=({text:e})=>(0,r.jsx)("span",{className:"text-block",children:e}),ek=({text:e})=>(0,r.jsx)("span",{className:"delimiter space-delimiter",children:e}),eF=({delimiter:e})=>(0,r.jsx)("span",{className:"delimiter",children:e}),eN=({keyword:e})=>(0,r.jsx)("span",{className:(0,u.$)("keyword-block",ew.Text_0),children:e}),eS=({text:e,className:t})=>(0,r.jsx)("span",{"data-type":"filter",className:t,children:e});try{eB.displayName||(eB.displayName="TextBlock")}catch{}try{ek.displayName||(ek.displayName="SpaceBlock")}catch{}try{eF.displayName||(eF.displayName="Delimiter")}catch{}try{eN.displayName||(eN.displayName="KeywordBlock")}catch{}try{eS.displayName||(eS.displayName="KeyBlock")}catch{}let eC=[_.tl.GreaterThan,_.tl.LessThan,_.tl.Before,_.tl.After],eP=[_.tl.GreaterThanOrEqualTo,_.tl.LessThanOrEqualTo,_.tl.BeforeAndIncluding,_.tl.AfterAndIncluding],eI=()=>{let{config:e}=(0,g.U2)(),{inputFocused:t,updateStyledInputBlockCount:i}=(0,g.Ge)(),{rawFilterRef:l,filterQuery:a}=(0,g.g0)(),s=(0,d.useRef)([]),o=(e,i,l,s)=>{let{id:o,key:n,operator:d}=e,{value:c,valid:p}=i;if(p){let e=0;eC.includes(d)?e=1:eP.includes(d)&&(e=2);let t=(0,b.I8)(c)?.charAt(e);return t&&I.wO.includes(t)?(0,r.jsx)("span",{"data-type":"filter-value",className:(0,u.$)("valid-filter-value",eb.Box_0),children:(0,b.I8)(c)},`filter-block-${l}-${n.value}-${s?`${s}-`:""}${(0,b.I8)(c)}`):(0,r.jsx)("span",{"data-type":"filter-value",className:(0,u.$)("valid-filter-value",eb.Box_1),children:(0,b.I8)(c)},`filter-block-${l}-${n.value}-${s?`${s}-`:""}${(0,b.I8)(c)}`)}return void 0===p||(!1!==p||a.activeBlock?.id===o)&&t?(0,r.jsx)("span",{"data-type":"filter-value",children:(0,b.I8)(c)},`filter-block-${l}-${n.value}-${s?`${s}-`:""}${(0,b.I8)(c)}`):(0,r.jsx)("span",{"data-type":"filter-value",className:(0,u.$)("invalid-filter-value",eb.Box_2),children:(0,b.I8)(c)},`filter-block-${l}-${n.value}-${s?`${s}-`:""}${(0,b.I8)(c)}`)},n=(0,d.useMemo)(()=>{let i=[];return(0,b.Ed)(a,l?.current)?(!function l(s,n){for(let[d,c]of s.entries()){let s;if((0,b.aK)(c)){let{key:i,operator:l,value:p}=c,v=!1===i.valid&&(a.activeBlock?.id!==c.id||!t),h=(0,r.jsx)(eS,{text:i.value,className:(0,u.$)(v&&eb.KeyBlock_0)},`filter-block-${d}-key`),m=(0,r.jsx)(eF,{delimiter:e.filterDelimiter},`filter-block-${d}-delimiter`),f=[];if(l===_.tl.Between){let e=p.values[0],t=p.values[1];e&&f.push(o(c,e,d,1)),f.push((0,r.jsx)("span",{className:"delimiter",children:".."},`filter-block-${d}-${i.value}-delimiter-1`)),t&&f.push(o(c,t,d,2))}else f=p.values.map((t,l)=>(0,r.jsxs)("span",{children:[l>0&&(0,r.jsx)("span",{className:"delimiter",children:e.valueDelimiter},`filter-block-${d}-${i.value}-delimiter-${l}`),o(c,t,d)]},`filter-block-${d}-${i.value}-values-${l}}`));s=(0,r.jsxs)("span",{"data-type":"filter-expression",children:[h,m,f]},`filter-block-${n}-${d}-${i.value}`)}else c.type===_._B.Space?s=(0,r.jsx)(ek,{text:c.raw},`space-block-${n}-${d}`):c.type===_._B.Keyword?s=(0,r.jsx)(eN,{keyword:c.raw},`keyword-block-${n}-${d}`):(0,b.W9)(c)?(i.push((0,r.jsx)(eB,{text:"("},`text-open-${n}-${d}`)),l(c.blocks,n?`${n}-${d}`:`${d}`),i.push((0,r.jsx)(eB,{text:")"},`text-close-${n}-${d}`))):s=(0,r.jsx)(eB,{text:c.raw},`text-block-${n}-${d}`);i.push(s)}}(a.blocks,"root"),s.current=i,i):s.current},[a.raw,a.blocks,a.activeBlock,a.isValidated,t,e.filterDelimiter,e.valueDelimiter]);return(0,d.useEffect)(()=>{i(n.length)},[n.length,i]),(0,r.jsx)(r.Fragment,{children:n})};try{eI.displayName||(eI.displayName="StyledInput")}catch{}let e$=({id:e,hasValidationMessage:t=!1,placeholder:i="Search or filter",onKeyDown:l})=>{let{suggestionsVisible:a,activeSuggestion:o,suggestionGroups:n}=(0,g.Pt)(),{caretRef:c,inputFocused:p,inputKeyDown:v,inputOnBlur:h,inputOnCompositionStart:m,inputOnCompositionEnd:f,inputOnChange:y,inputOnFocus:x,inputRef:_,inputSelectionEnd:b,inputSelectionStart:w,inputValue:B,updateInputSelection:k}=(0,g.Ge)(),F=(0,d.useRef)(null),[N,S]=(0,d.useState)(0),C=(0,d.useRef)(null),P=(0,d.useCallback)(e=>{k(e.selectionStart??0,e.selectionEnd??0)},[k]),I=(0,d.useCallback)(e=>{P(e.currentTarget),v(e),l?.(e)},[P,v,l]),$=(0,d.useCallback)(e=>{P(e.currentTarget)},[P]),j=(0,d.useMemo)(()=>{let e=Math.max((F.current?.scrollWidth??0)+2,ec.$_);return`${e}px`},[w,F.current?.scrollWidth,B]);(0,ex.N)(()=>{let e=c.current,t=C.current;e&&t&&(e.offsetLeft<N?S(e.offsetLeft-t.clientWidth-ec.$_):e.offsetLeft>N+t.clientWidth?S(e.offsetLeft-t.clientWidth+ec.$_):t.scrollLeft=N)},[c,N,w,B]);let V=(0,d.useMemo)(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:w?B.substring(0,w):B}),(0,r.jsx)("span",{...(0,s.G)("filter-cursor"),ref:c}),(0,r.jsx)("span",{children:w?B.substring(w):null})]}),[c,w,B]),T=(0,d.useMemo)(()=>a&&n.some(e=>e.suggestions.length>0),[n,a]);return(0,d.useEffect)(()=>{_.current&&w>-1&&p&&(_.current.selectionStart=w,_.current.selectionEnd=b)},[_,w,b,B]),(0,r.jsxs)("div",{...(0,s.G)("styled-input-container"),ref:C,tabIndex:-1,className:(0,u.$)("styled-input-container",e_.Box_0),children:[(0,r.jsx)("div",{...(0,s.G)("styled-input-content"),"aria-hidden":"true",className:(0,u.$)("styled-input-content",e_.Box_1),children:(0,r.jsx)(eI,{})}),(0,r.jsxs)("div",{...(0,s.G)("filter-input-wrapper"),className:e_.Box_2,children:[(0,r.jsx)("div",{...(0,s.G)("filter-sizer"),ref:F,"aria-hidden":"true",className:e_.Box_3,children:V}),(0,r.jsx)("input",{id:`${e}-input`,role:"combobox","aria-expanded":T,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":`${e}-results`,"aria-activedescendant":null!==o&&-1!==o&&a?`suggestion-${o}`:void 0,"aria-describedby":t?`${e}-validation-message`:"",placeholder:i,ref:_,value:B,onFocus:x,onBlur:h,onCompositionStart:m,onCompositionEnd:f,onKeyDown:I,onClick:$,onChange:y,name:`${e}-inputname`,autoComplete:"off",spellCheck:"false",style:{width:j},className:e_.Box_4,...(0,s.G)("filter-input")})]})]})};try{e$.displayName||(e$.displayName="Input")}catch{}let ej={IconButton_0:"SubmitButton-module__IconButton_0--AJwMO"},eV=()=>{let{onSubmit:e}=(0,g.g0)();return(0,r.jsx)(D.K,{"aria-label":"Search",size:"medium",icon:p.SearchIcon,variant:"default",onClick:()=>{e(_.FT.ExplicitSubmit,"input_with_button")},className:ej.IconButton_0})};try{eV.displayName||(eV.displayName="SubmitButton")}catch{}var eT=i(94232),eA=i(30422);let eE={item:"SuggestionItem-module__item--hWolC",Box_0:"SuggestionItem-module__Box_0--FO_jZ",GitHubAvatar_0:"SuggestionItem-module__GitHubAvatar_0--_U3KQ",UnsafeHTMLText_0:"SuggestionItem-module__UnsafeHTMLText_0--MGu8j",boldText:"SuggestionItem-module__boldText--WYZBt",normalText:"SuggestionItem-module__normalText--mu4Jo",Box_1:"SuggestionItem-module__Box_1--GDdRF",ActionList_Description:"SuggestionItem-module__ActionList_Description--Y43Fu"},eD=e=>{let{suggestionId:t,active:i,icon:l,iconColor:a,value:s,avatar:o,displayName:n,ariaLabel:c}=e,{suggestionSelected:p,activeSuggestionRef:v}=(0,g.Pt)(),{inputRef:h}=(0,g.Ge)(),m=(0,d.useCallback)(()=>{p(e),h.current?.focus()},[h,e,p]),f=(0,d.useCallback)(e=>{i&&e?(v.current=e,e.scrollIntoView({block:"nearest"})):v.current=null},[i,v]);return(0,r.jsxs)(B.l.Item,{id:`suggestion-${t}`,onSelect:m,active:i,role:"option","aria-label":c,"aria-selected":i,tabIndex:-1,"aria-labelledby":void 0,ref:f,className:eE.item,children:[(l||a||o)&&(0,r.jsx)(B.l.LeadingVisual,{children:(0,r.jsxs)("div",{className:eE.Box_0,children:[l?(0,r.jsx)(l,{fill:a??"currentcolor"}):a?(0,r.jsx)("div",{style:{backgroundColor:a},className:eE.Box_1}):null,o&&(0,r.jsx)(W.r,{src:o.url,alt:(0,b.I8)(s)??"User Avatar",square:!1,className:eE.GitHubAvatar_0})]})}),(0,r.jsx)(eA.BC,{html:n??(0,b.I8)(s)??"",className:(0,u.$)(eE.UnsafeHTMLText_0,e.description?eE.boldText:eE.normalText)}),e.description&&void 0!==e.inlineDescription&&(0,r.jsx)(B.l.Description,{variant:e.inlineDescription?"inline":"block",className:eE.ActionList_Description,truncate:!!e.inlineDescription,children:e.description})]})};try{eD.displayName||(eD.displayName="SuggestionItem")}catch{}let eR={Box_0:"SuggestionsList-module__Box_0--Wvm5A",Box_1:"SuggestionsList-module__Box_1--ZCfM4",ActionList_0:"SuggestionsList-module__ActionList_0--aBWYm",Box_3:"SuggestionsList-module__Box_3--FlurF",showOverlay:"SuggestionsList-module__showOverlay--KgKYQ"},eO=({id:e})=>{let{id:t}=(0,g.U2)();e=e??t;let{suggestionsListRef:i,activeSuggestion:l,isFetchingSuggestions:a,position:o,suggestionGroups:n,suggestionsVisible:c}=(0,g.Pt)(),{suspendFocus:p}=(0,g.Ge)(),v=(e,t="wave")=>(0,r.jsxs)("div",{className:eR.Box_0,children:[(0,r.jsx)(eT.O,{variant:"elliptical",width:"20px",height:"20px",animationStyle:t}),(0,r.jsx)(eT.O,{variant:"rounded",width:"random",height:"16px",animationStyle:t})]},e),h=(0,d.useMemo)(()=>(0,r.jsx)("div",{children:Array(8).fill(1).map((e,t)=>v(`loading-skeleton-${t}`))}),[]),m=(0,d.useMemo)(()=>v("prefetched-loading-skeleton","pulse"),[]),f=c&&n.some(e=>e.suggestions.length>0)||a,y=(0,d.useMemo)(()=>{let e=-1,t=[];return n.map((i,a)=>{i.suggestions.length>0&&(t.push((0,r.jsxs)(B.l.Group,{children:[i.title&&(0,r.jsx)(B.l.GroupHeading,{...(0,s.G)("suggestions-heading"),"aria-hidden":"true",children:i.title}),i.suggestions.map(t=>(e++,(0,d.createElement)(eD,{...t,suggestionId:e,key:(0,b.W5)("suggestion",t.id,`${(0,b.I8)(t.value)}-${t.displayName}-${t.description}`),active:e===l})))]},(0,b.W5)("group",i.id))),a++<n.length-1&&(n[a++]?.suggestions??[]).length>0&&t.push((0,r.jsx)(B.l.Divider,{},(0,b.W5)("divider",i.id))))}),t},[l,n]);return(0,r.jsx)("div",{className:eR.Box_1,...(0,s.G)("backdrop-anchor"),children:(0,r.jsx)("div",{id:`${e}-suggestions`,ref:i,className:(0,u.$)(eR.Box_3,f&&eR.showOverlay),style:{left:`${o?o.left:0}px`},children:(0,r.jsxs)(B.l,{...(0,s.G)("filter-results"),"aria-label":a?"Loading Suggestions":"Suggestions",role:"listbox",id:`${e}-results`,className:eR.ActionList_0,onMouseDown:e=>p(e.currentTarget),children:[f&&n.some(e=>e.suggestions.length>0)&&y,f&&a&&(0,r.jsx)("div",{children:n.some(e=>e.suggestions.length>0)?m:h})]})})})};try{eO.displayName||(eO.displayName="SuggestionsList")}catch{}var eM=i(95726);let eL={Banner:"ValidationMessage-module__Banner--KyRlC",Box_0:"ValidationMessage-module__Box_0--_x3JI",Box_2:"ValidationMessage-module__Box_2--V7TSg",VerifiedHTMLBox_0:"ValidationMessage-module__VerifiedHTMLBox_0--c5V1E"},eU=({id:e,messages:t})=>!t||t.length<1?null:(0,r.jsxs)(eM.l,{id:e,variant:"warning",className:eL.Banner,children:[(0,r.jsx)(eM.l.Title,{children:(0,r.jsx)("span",{...(0,s.G)("validation-error-count"),children:y.D.filterInvalid(t.length)})}),(0,r.jsx)("div",{className:eL.Box_0,children:(0,r.jsx)("ul",{className:eL.Box_2,...(0,s.G)("validation-error-list"),children:t.map(e=>(0,r.jsx)(eA.Pk,{as:"li",html:e,domPurifyConfig:{ALLOWED_TAGS:["pre"]},className:eL.VerifiedHTMLBox_0},e.replaceAll(" ","-")))})})]});try{eU.displayName||(eU.displayName="ValidationMessage")}catch{}var eW=i(34614);let eH={Octicon_0:"FilterRevert-module__Octicon_0--KHDOC",Link_0:"FilterRevert-module__Link_0--h8G6E"},eG=({className:e,as:t,onClick:i,href:l})=>(0,r.jsxs)(eW.A,{...(0,s.G)("filter-revert-query"),as:t||"a",href:l,onClick:i,className:(0,u.$)(e,eH.Link_0),children:[(0,r.jsx)(p.UndoIcon,{className:eH.Octicon_0}),"Revert filter changes"]});try{eG.displayName||(eG.displayName="FilterRevert")}catch{}let eK=new eh.N,eQ=({advancedFilterDialogRef:e,className:t,context:i,"data-testid":l,filterButtonVariant:c="normal",filterValue:p,id:v,initialFilterValue:h,inputRef:m,label:f,onChange:g,onParse:x,onSubmit:_,onKeyDown:b,onValidation:w,placeholder:B,providers:k,settings:F,showValidationMessage:N=!0,variant:S="full",visuallyHideLabel:C=!0,showClearButton:P=!0})=>{let[I,$]=(0,d.useState)([]),j=N&&I.length>0,{sendAnalyticsEvent:V}=(0,o.s)(),T=(0,d.useCallback)((e=[],t=eK)=>{JSON.stringify(I)!==JSON.stringify(e)&&$(e),w?.(e,t)},[w,I]),A=(0,n.tv)({regular:c,narrow:"button"===S?"normal":"compact"},c),E="string"==typeof p,[D,R]=(0,d.useState)(h||""),O=(0,d.useCallback)(e=>{E||R(e),g?.(e)},[E,g]);(0,d.useEffect)(()=>{if(I.length>0){let e=I.map(e=>e.replaceAll(/<pre>|<\/pre>/g,"'")).join(". "),t=`${y.D.filterInvalid(I.length)} ${e}.`;(0,a.i)(t),V("filter.validation_errors","FILTER_VALIDATION_ERRORS",{messages:e})}},[V,I]);let M="input"===S&&!_||"input"!==S&&!_,[L,U]=(0,d.useState)(!1);return(0,d.useImperativeHandle)(e,()=>({isAdvancedFilterDialogOpen:L,toggleAdvancedFilterDialog:e=>U(e??!L)}),[L]),(0,r.jsx)(ep.dv,{context:i,inputRef:m,rawFilter:E?p:D,onChange:O,onParse:x,onSubmit:_,onValidation:T,providers:k,settings:{...ec.Fy,...F},variant:S,children:(0,r.jsxs)("div",{id:v,role:"form",className:(0,u.$)("FormControl FormControl--fullWidth",t,ev.Box_1),...(0,s.G)(l??"filter"),children:[(0,r.jsx)("label",{id:`${v}-label`,htmlFor:`${v}-input`,className:`FormControl-label ${C?"sr-only":""}`,...(0,s.G)("filter-bar-label"),children:f}),(0,r.jsxs)("div",{className:ev.Box_0,children:[(0,r.jsxs)(eg,{isStandalone:"button"===S,children:["input"!==S&&(0,r.jsx)(en,{isStandalone:"button"===S,filterButtonVariant:A,dialogOpen:L,setDialogOpen:U}),"button"!==S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,u.$)(ev.Box_2,"input"===S&&ev.leftRounded,M&&ev.rightRounded,_&&ev.hasSubmit),children:[!_&&(0,r.jsx)(ef,{}),(0,r.jsx)(e$,{id:v,placeholder:B,onKeyDown:b,hasValidationMessage:j}),P&&(0,r.jsx)(ed,{})]}),_&&(0,r.jsx)(eV,{})]})]}),(0,r.jsx)(eO,{id:v}),N&&(0,r.jsx)(eU,{messages:I,id:`${v}-validation-message`})]})]})})};eQ.displayName="FilterInternal";let eq={},ez=e=>(0,r.jsx)(l.y,{appName:"shared_components",category:"filter",metadata:eq,children:(0,r.jsx)(eQ,{...e})});ez.displayName="Filter"},92641:(e,t,i)=>{i.d(t,{xI:()=>y,g0:()=>f});var r=i(74848),l=i(75367),a=i(96540),s=i(491),o=i(44308),n=i(96276),u=i(72082),d=(i(79607),i(91385),i(52123),i(90678)),c=i(71073),p=(i(73272),i(62884)),v=i(14653);p.e;let NoFilterProviderV2=class NoFilterProviderV2 extends v.Q{constructor(e,t){super(e,d.ak.NoValue,t)}};var h=i(82759);let m=(0,a.createContext)(void 0),f=()=>{let e=(0,a.useContext)(m);if(!e)throw Error("useFilterQuery must be used inside a FilterQueryContext");return e},y=({children:e,context:t,customParser:i,filterConfig:p,providers:v,inputRef:f,onChange:y,onParse:g,onSubmit:x,onValidation:_,rawFilter:b})=>{let w=(0,a.useRef)(b??""),B=(0,a.useRef)(i??new n.i(v.filter(e=>!(0,c.B8)(e)),p)),[k,F]=(0,a.useState)(()=>B.current.parse(b,new o.N,-1)),[N,S]=(0,a.useState)(!0),{inputContextRef:C,config:P}=(0,h.U2)(),I="full"===P.variant?"button_and_input":"input"===P.variant?"input_only":"button_only",{sendClickAnalyticsEvent:$}=(0,l.S)();(0,a.useEffect)(()=>{k.staticContext=t},[t,k]);let j=(0,a.useCallback)(()=>{y(""),x?.(new o.N,d.FT.Clear),f.current?.focus()},[f,y,x]),V=(0,a.useMemo)(()=>{let e={},t=[],i=[];if(v.map(r=>{if((0,c.B8)(r))for(let l of r.filterProviders)e[l.key]=l,l.options.filterTypes.valueless&&t.push(l),l.options.filterTypes.hasValue&&i.push(l);else e[r.key]=r,r.options.filterTypes.valueless&&t.push(r),r.options.filterTypes.hasValue&&i.push(r)}),t.length&&(e.no=new NoFilterProviderV2(t.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0).map(e=>({value:e.key,priority:s.$D,displayName:e.displayName,type:d.ak.Value,icon:e.icon})))),i.length){let t=i.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0).map(e=>({value:e.key,priority:s.$D,displayName:e.displayName,type:d.ak.Value,icon:e.icon}));e.has=new u.M(t)}return B.current.filterProviders=Object.values(e),e},[v]),T=(0,a.useCallback)((e,t=!1)=>{_(e.getErrors(t||document.activeElement!==f.current),new o.N(e.raw,e.blocks,p,e.activeBlock))},[p,f,_]),A=(0,a.useCallback)((e,t,i)=>{S(!1),new Promise((t,r)=>{let l=B.current.parse(i??b,k,e);(0,c.Ed)(l,w.current)?(F(l),t(l)):r(Error("Query out of sync, Aborted..."))}).then(e=>B.current.validateFilterQuery(e)).then(e=>new Promise((t,i)=>e&&(0,c.Ed)(e)?(F(e),t(e)):i(Error(e?"Out of sync":"Empty Query, Aborted...")))).then(e=>{t?.(e)}).catch(()=>{})},[k,b]),E=(0,a.useCallback)((e,t)=>{A(e||(C.current?.caretStart??-1),e=>{T(e),t?.(e)})},[C,A,T]),D=(0,a.useCallback)(async(e,t,i)=>{let r=i??k;r.clearActiveBlock();let l=0,a=!1;for(;l<=3;)if((0,c.Ed)(r,b)){x?.(r,e),T(r,!0),a=!0;break}else l+=1,await (0,c.he)(10);a||A(C.current?.caretStart??-1,t=>{(0,c.Ed)(t,b)&&(x?.(t,e),T(r,!0))});let s=k.filtersUsed.length>0?k.filtersUsed.join(","):"";$({action:"submit_filter_query",label:`variant:${I};event_type:${e};used_filter_providers:${s};nested_group_depth:${k.nestedGroupCount};submitted_by:${t??"unnamed_submit_method"}`})},[k,C,x,A,T,b,$,I]),R=(0,a.useCallback)((e,t=-1,i,r)=>{let l=e??k.raw;y?.(l),r&&(w.current=l,A(t,e=>{(0,c.Ed)(e,w.current)&&(i?.(e),x?.(e,r),g?.(e))},l))},[k.raw,y,g,x,A]),O=(0,a.useCallback)(e=>{let[t,i]=B.current.replaceActiveBlockWithPresenceBlock(k,e);C.current?.updateCaretPosition(i),R(t,i)},[k,C,R]),M=(0,a.useCallback)((e,t,i=!1)=>{let[r,l]=B.current.insertSuggestion(k,e,t);C.current?.updateCaretPosition(l),C.current?.updateRawFilterValue(r),R(r,l,void 0,i?d.FT.SuggestionSelected:void 0)},[k,C,R]),L=(0,a.useCallback)(e=>{(b!==w.current||N)&&(w.current=b,A(C.current?.caretStart??-1,t=>{T(t),g?.(t),e(t)}))},[C,N,g,A,T,b]),U=(0,a.useMemo)(()=>({clearFilter:j,filterQuery:k,filterProviders:V,forceReparse:E,insertIntoQuery:M,onSubmit:D,rawFilterRef:w,replaceActiveBlockWithPresenceBlock:O,updateFilter:R,updateFromExternal:L}),[j,V,k,E,M,D,O,R,L]);return(0,r.jsx)(m.Provider,{value:U,children:e})};try{m.displayName||(m.displayName="FilterQueryContext")}catch{}try{y.displayName||(y.displayName="FilterQueryContextProvider")}catch{}},75797:(e,t,i)=>{i.d(t,{Ge:()=>p,NH:()=>h});var r=i(74848),l=i(64515),a=i(96540),s=i(90678),o=i(71073),n=i(82759),u=i(92641),d=i(55581);let c=(0,a.createContext)(void 0),p=()=>{let e=(0,a.useContext)(c);if(!e)throw Error("useInput must be used inside a InputContext");return e},v=(e,t,i,r)=>{let l=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value");l?.set?.call(e,t),e.setSelectionRange(i,r??i),e.dispatchEvent(new Event("input",{bubbles:!0})),e.value=t},h=(0,a.forwardRef)(({caretRef:e=null,children:t,inputRef:i=null,value:p="",filterConfig:h},m)=>{let f=(0,a.useRef)(null);(0,l.T)(e,f);let y=(0,a.useRef)(null);(0,l.T)(i,y);let[g,x]=(0,a.useState)(!1),[_,b]=(0,a.useState)(!1),[w,B]=(0,a.useState)(-1),[k,F]=(0,a.useState)(-1),N=(0,a.useRef)(!1),[S,C]=(0,a.useState)(p),P=(0,a.useRef)(0),{hideSuggestions:I,suggestionGroups:$,activeSuggestion:j,setActiveSuggestion:V,suggestionsVisible:T,suggestionSelected:A,updateSuggestions:E}=(0,d.Pt)(),{forceReparse:D,onSubmit:R,rawFilterRef:O,updateFilter:M}=(0,u.g0)(),{config:L}=(0,n.U2)(),U=(0,a.useCallback)((e,t)=>{B(e),F(t??e)},[]);(0,a.useImperativeHandle)(m,()=>({caretStart:w,caretEnd:k,isComposing:N.current,inputHasFocus:_,styledInputBlockCount:P.current,updateCaretPosition:U,updateRawFilterValue:z}));let W=(0,a.useCallback)(e=>{if(N.current)return;let t=(0,o.jh)($);if("ArrowLeft"===e.key||"ArrowRight"===e.key)I();else if("ArrowDown"===e.key)j+1>=t.length?V(-1):V(j+1),e.preventDefault();else if("ArrowUp"===e.key)j<0?V(t.length-1):V(j-1),e.preventDefault();else if("Enter"===e.key){if(T&&null!==j){let i=t[j];if(i){e.preventDefault(),A(i),y.current?.focus();return}}R(s.FT.ExplicitSubmit,"input_with_enter"),I()}else if("Escape"===e.key)T&&(I(),e.stopPropagation());else if("Home"===e.key||"End"===e.key)V(-1);else if(h.groupAndKeywordSupport&&["("].includes(e.key)||'"'===e.key){let t=e.currentTarget,i=e.key;if(t.selectionStart!==t.selectionEnd&&["(",'"'].includes(i)){let r="("===i?")":'"',l=`${t.value.slice(0,w)}${i}${t.value.slice(w,k)}${r}${t.value.slice(k)}`;v(t,l,w+1,k+1),e.preventDefault();return}let r=t.selectionEnd??t.selectionStart??-1;if('"'===i&&'"'===t.value.charAt(r)){v(t,t.value,w+1),e.preventDefault();return}if(t.value.charAt(r).match(/\w/g)||t.value.charAt(r-1).match(/[\w"]/g))return;if("("===i){for(let[e,i]of(0,o.Dy)(t.value))if(r>e&&r<=i)return}e.preventDefault();let l="("===i?")":'"',a=`${t.value.slice(0,r)}${i}${l}${t.value.slice(r)}`;v(t,a,r+1)}else if("Backspace"===e.key){let t=e.currentTarget,i=t.selectionEnd??-1;if(h.groupAndKeywordSupport&&"("===t.value.charAt(i-1)&&")"===t.value.charAt(i)||'"'===t.value.charAt(i-1)&&'"'===t.value.charAt(i)){e.preventDefault();let r=`${t.value.slice(0,i-1)}${t.value.slice(i+1)}`;v(t,r,i-1)}}},[j,h.groupAndKeywordSupport,I,k,w,R,V,A,$,T]),H=(0,a.useCallback)(()=>{b(!0),g?x(!1):D(-1,async e=>{(0,o.Ed)(e,O?.current)&&await E(e,w)})},[g,D,O,E,w]),G=(0,a.useCallback)(()=>{g||(b(!1),D(-1),I())},[g,D,I]),K=(0,a.useCallback)(()=>{N.current=!0,I()},[I]),Q=(0,a.useCallback)(()=>{N.current=!1},[]),q=(0,a.useCallback)(e=>{let t=e.currentTarget,i=t.value;if(i===S)return;C(i),e.preventDefault();let r="button"!==L.variant?t.selectionStart??-1:-1,l="button"!==L.variant?t.selectionEnd??-1:-1;M(i,r,e=>{E(e,r)}),U(r,l)},[L.variant,M,U,E,S]),z=(0,a.useCallback)(e=>{e!==S&&(C(e),M(e,-1))},[S,M]),X=(0,a.useCallback)(e=>{P.current=e},[]),J=(0,a.useCallback)(()=>{x(!0)},[]),Z=(0,a.useMemo)(()=>({caretRef:f,inputFocused:_,inputKeyDown:W,inputOnBlur:G,inputOnCompositionStart:K,inputOnCompositionEnd:Q,inputOnChange:q,inputOnFocus:H,inputRef:y,inputSelectionEnd:k,inputSelectionStart:w,inputValue:S,suspendFocus:J,updateInputSelection:U,updateStyledInputBlockCount:X}),[_,W,G,K,Q,q,H,k,w,S,J,U,X]);return(0,r.jsx)(c.Provider,{value:Z,children:t})});h.displayName="InputContextProvider";try{c.displayName||(c.displayName="InputContext")}catch{}},16099:(e,t,i)=>{i.d(t,{U2:()=>c,dv:()=>p});var r=i(74848),l=i(64515),a=i(96540),s=i(52123),o=i(92641),n=i(75797),u=i(55581);let d=(0,a.createContext)(void 0),c=()=>{let e=(0,a.useContext)(d);if(!e)throw Error("useFilter must be used inside a FilterProvider");return e},p=({children:e,context:t,customParser:i,rawFilter:c,filterDelimiter:p=s.a7.filterDelimiter,inputRef:v=null,onChange:h,onParse:m,onSubmit:f,onValidation:y,providers:g,settings:x,valueDelimiter:_=s.a7.valueDelimiter,variant:b})=>{let w=(0,a.useMemo)(()=>({filterDelimiter:p,valueDelimiter:_,...s.Fy,...x,variant:b}),[p,x,_,b]),B=(0,a.useRef)(null);(0,l.T)(v,B);let k=(0,a.useRef)(null),F=(0,a.useRef)(null),N=(0,a.useId)(),S=(0,a.useMemo)(()=>({config:w,id:N,inputContextRef:F}),[w,N,F]);return(0,a.useEffect)(()=>{F.current?.updateRawFilterValue(c)},[c]),(0,r.jsx)(d.Provider,{value:S,children:(0,r.jsx)(o.xI,{customParser:i,context:t,filterConfig:w,providers:g,inputRef:B,onChange:h,onParse:m,onSubmit:f,onValidation:y,rawFilter:c,children:(0,r.jsx)(u.Yl,{caretRef:k,inputRef:B,children:(0,r.jsx)(n.NH,{caretRef:k,inputRef:B,ref:F,value:c,filterConfig:w,children:e})})})})};try{d.displayName||(d.displayName="FilterContext")}catch{}try{p.displayName||(p.displayName="FilterContextProvider")}catch{}},55581:(e,t,i)=>{let r;i.d(t,{Rx:()=>b,Yl:()=>B,Pt:()=>_});var l=i(74848),a=i(70170),s=i(17515),o=i(96540),n=i(18991),u=i(69676),d=i(81425),c=i(58748);let p=/:|,|\s(?=(?:[^"]*"[^"]*")*[^"]*$)/g;var v=i(90678),h=i(71073),m=i(52811);let f=(e="",t=!0)=>{r&&clearTimeout(r),r=setTimeout(()=>{(0,m.i)(e,{assertive:t})},150)};var y=i(92641),g=i(16099);let x=(0,o.createContext)(void 0),_=()=>{let e=(0,o.useContext)(x);if(!e)throw Error("useSuggestions must be used inside a SuggestionsContext");return e},b=25;function w(e,t){let i=(t?.value.values??[]).map(e=>(0,h.M5)(e.value)),r=e.suggestions.filter(e=>{let t=(0,h.I8)(e.value)??"";return!i.includes(t)});return{...e,suggestions:r}}let B=({children:e,caretRef:t,inputRef:i})=>{let{config:r,inputContextRef:m}=(0,g.U2)(),{filterQuery:_,filterProviders:B,insertIntoQuery:k,rawFilterRef:F,replaceActiveBlockWithPresenceBlock:N,updateFilter:S,updateFromExternal:C}=(0,y.g0)(),P=(0,o.useRef)(null),I=(0,o.useRef)(null),{position:$,updatePosition:j}=function(e,t=[]){let i=(0,d.L)(e?.floatingElementRef),r=(0,d.L)(e?.caretElementRef),l=(0,d.L)(e?.inputElementRef),[a,n]=(0,o.useState)(void 0),v=()=>{let e,t=Array.from(l.current?.closest(".styled-input-container")?.querySelectorAll(".delimiter")??[]),i=l.current?.value;if(!i||!l.current.selectionStart)return null;let r=[...i.slice(0,l.current.selectionStart).matchAll(p)];if(r.length<1)return l.current;for(let i=r.length??0;i>0;i--){let r=t?.[i-1];if(r&&!r?.classList.contains("text-delimiter")){e=r;break}}return e??l.current},h=(0,o.useCallback)(()=>{let t=v()??l.current;i.current instanceof Element&&t instanceof Element?n((0,u.uG)(i.current,t,e)):n(void 0)},[i,r,...t]);return(0,s.N)(h,[h]),(0,c.w)(h),{floatingElementRef:i,caretElementRef:r,position:a,updatePosition:h}}({caretElementRef:t,floatingElementRef:I,inputElementRef:i,side:"outside-bottom",align:"start",alignmentOffset:-16,allowOutOfBounds:!1},[I.current,m.current?.styledInputBlockCount]),[V,T]=(0,o.useState)(!1),[A,E]=(0,o.useState)(!1),[D,R]=(0,o.useState)([]),[O,M]=(0,o.useState)(-1),L=(0,o.useCallback)(()=>{A||E(!0)},[A]),U=(0,o.useCallback)(()=>{E(!1),M(-1)},[]),W=(0,a.s)(f,500,{start:!1}),H=(0,o.useCallback)(async(e,t)=>{let l=!0;if("button"===r.variant||m.current?.isComposing)return;R([]),j();let a=e??_,s=t??i.current?.selectionStart??-1,o={id:"cached-suggestions",suggestions:[]},u=o,d=[],c=a.activeBlock,p=c&&(0,h.v7)(c)?c:void 0,f=c?(0,h.DS)(c,s):"",y=f&&p&&p.provider?.isCompleteResultSetQuery?.(f);if(p){let[e]=(0,h.t4)(p,s);"value"===e&&f&&(u=w(o={id:"cached-suggestions",suggestions:p.provider?.findPrefetchedSuggestions?.(f)??[]},p))&&u.suggestions.length>0&&(L(),W(`${u.suggestions.length} ${1===u.suggestions.length?"suggestion":"suggestions"}`),R([u]))}if(u.suggestions.length<b&&!y){p&&p.provider?.isCompleteResultSetQuery?.(f)!==void 0&&T(!0),d=await a.getSuggestions(s,B,r),d[0]?.suggestions.unshift(...o.suggestions);let e=new Set;d[0]&&(d[0].suggestions=d[0]?.suggestions.filter(t=>{let i=(0,h.I8)(t.value)??"";return!e.has(i)&&e.add(i)})),d[0]&&c?.type===v._B.Text&&c.raw.startsWith("-")&&(d[0].title=n.D.exclude)}else d=[o];if(p){let e=(0,h.DS)(p,s),t=d[0]?.suggestions;1===d.length&&t&&(0,h.I8)(t[0]?.value)===e&&e.length>0&&(1===t.length?l=!1:0===t.filter(t=>{let i=(0,h.I8)(t.value);return i!==e&&i?.startsWith(e)}).length&&(l=!1))}if(d[0]&&(d[0]=w(d[0],p),d[0].suggestions=d[0].suggestions.slice(0,b)),(0,h.Ed)(a,F?.current)&&a.isValidated){let e=d.reduce((e,t)=>e+t.suggestions.length,0);document.activeElement===i.current&&e>0&&W(`${e} ${1===e?"suggestion":"suggestions"}`,!1),R(d),0===o.suggestions.length&&M(-1),d.length>0&&l&&m.current?.inputHasFocus?L():U()}T(!1)},[r,_,i,B,L,j,F,m,U,W]),G=(0,o.useCallback)(e=>{let t;M(-1);let l=_.activeBlock,a=e.value.toString().startsWith("-"),s=!1;if(e.value===n.D.dividerValue)return;"keyword"===e.type?t=(0,h.jQ)(e.value):l&&l.type===v._B.Filter?a?t=(0,h.jQ)(e.value):(t=(0,h.jQ)(e.value),s=!0,U()):"-"===(t=(0,h.jQ)(e.value))||t?.endsWith(".")||(t+=r.filterDelimiter);let o=i.current?.selectionStart??-1;e.type===v.ak.NoValue?N("no"):e.type===v.ak.HasValue?N("has"):t?k(t,o,s):S()},[r.filterDelimiter,_.activeBlock,U,i,k,N,S]);(0,s.N)(()=>{C(async e=>{(0,h.Ed)(e,F?.current)&&await H(e,i.current?.selectionStart??-1)})},[F,H,_.raw,_,C,i]);let K=(0,o.useMemo)(()=>({activeSuggestion:O,hideSuggestions:U,isFetchingSuggestions:V,position:$,showSuggestions:L,suggestionGroups:D,suggestionsListRef:I,suggestionSelected:G,suggestionsVisible:A,setActiveSuggestion:M,updateSuggestions:H,activeSuggestionRef:P}),[O,P,U,V,$,L,D,G,A,H]);return(0,l.jsx)(x.Provider,{value:K,children:e})};try{x.displayName||(x.displayName="SuggestionsContext")}catch{}try{B.displayName||(B.displayName="SuggestionsContextProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_filter_providers_index_ts-ee321014c5c1.js.map